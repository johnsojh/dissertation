% This chapter contains known results and motivation for the
% definition of a piecewise syndetic set.  [6/19/2011 John]

\chapter{Preliminaries}
\label{prelim}

\section{Van der Waerden's Theorem and Semigroup Theory}
Bartel Leendert van der Waerden in \cite{Van-der-Waerden:1927fk} proved the following remarkable assertion about arithmetic progressions in the positive integers.

\begin{vdw}
  Let $r$ and $k$ be positive integers.
  Then there exists a positive integer $N$ such that if $\{1, 2, \ldots, N\} = \bigcup_{i=1}^r C_i$, then there exists $i \in \{1, 2, \ldots, r\}$ such that $C_i$ contains a $k$-term arithmetic progression, that is, there exist positive integers $a$ and $d$ with $\{a, a+d, \ldots, a + (k-1)d\} \subseteq C_i$.
\end{vdw}
 
Van der Waerden's proof of this theorem uses a complicated, but elementary, combinatorial argument based on the pigeonhole principle and `double induction'.% 
\endnote{
  I'm not sure of the exact form of van der Waerden's argument since I have never read the paper \cite{Van-der-Waerden:1927fk}. 
  This statement is based on my opinion that all known combinatorial proofs of van der Waerden's Theorem are not simple, Khinchin's opinion on the difficulty of the original proof \cite[expressed in Section 1, pages 11--12]{Khinchin:1998fk}, and van der Waerden's description on how he found his proof in \cite{Van-der-Waerden:1971fk}. 
  (Van der Waerden's description in \cite{Van-der-Waerden:1971fk} seems to imply that his proof is similar to the one in \cite[Chapter 1]{Khinchin:1998fk}.)
  The interested reader can find a combinatorial proof of van der Waerden's Theorem in Section 2 of \cite{Hindman:1979fk}, \cite[Chapter 1]{Khinchin:1998fk}, or \cite[Chapter 2, pages 33--34]{Graham:1990fk}.
} 
(Endnotes will appear at the end of every chapter.)
Despite being such an old result, van der Waerden's Theorem still forms the basis for much of the contemporary research in the field of Ramsey Theory%
\endnote{
  Almost a decade after van der Waerden published his proof, Paul Erd\H{o}s and Paul Tur\'{a}n in \cite{Erdos:1936fk} started investigating when a finite set of natural numbers would contain a 3-term arithmetic progression.
  One of their conjectures contained in this paper is the following: For every $\delta > 0$ there exists a natural number $N$ such that if $A \subseteq \{1, 2, \ldots, N\}$ with $|A| \ge \delta N$, then $A$ contains a 3-term arithmetic progression. 
  This conjecture turned out to be both correct and hard to prove.

  The first proof of the conjecture came from Klaus Roth in \cite{Roth:1952uq} and \cite{Roth:1953kx} using ``an adaptation of the Hardy-Littlewood [circle] method'' \cite[page 106]{Roth:1953kx}.  
  Over a decade later, Endre Szemer\'{e}di was able to extend this result by using a combinatorial argument in \cite{Szemeredi:1969vn} by replacing `3-term arithmetic progression' by `4-term arithmetic progression'. 
  A few years later in \cite{Szemeredi:1975ys}, again using a difficult combinatorial argument, Szemer\'{e}di was able to further extend the result by replacing `3-term arithmetic progression' by `$k$-term arithmetic progression' for every natural number $k$.

  William Timothy Gowers in \cite{Gowers:2001zr} discovered a new proof of Szemer\'{e}di's Theorem using an important technical adaption of Roth's original argument.
  Gowers's method was one of the original motivations behind Ben Green's and Terence Tao's remarkable result that the primes contain a $k$-term arithmetic progression for every natural number $k$ \cite{Green:2008ly}. 
},
and in this dissertation it will play a similar foundational role. 

This theorem can be rewritten to apply to any semigroup, where we replace an arithmetic progression $\{a, a+d, ..., a+(k-1)d\}$ by an `algebraic line' $\{a, ad, ..., ad^{k-1}\}$. As observed in the introduction of \cite{Bergelson:1992fk}, this `generalization' follows directly from van der Waerden's Theorem itself. 

\begin{thm}
  \label{thm:semigrp-vdw}
  Let $(S, \cdot)$ be a semigroup, and let $r$ and $k$ be positive integers.
  If $b$ and $c$ are elements of $S$, then there exists a positive integer $N$ such that whenever $\{bc, bc^2, \ldots, bc^N\} = \bigcup_{i=1}^r C_i$, there exist $i \in \{1, 2, \ldots, r\}$ and $a$, $d \in S$ with $\{a, ad, \ldots, ad^{k-1}\} \subseteq C_i$.
\end{thm}
\begin{proof}
  Pick a positive integer $N$ as guaranteed by van der Waerden's Theorem for $r$ and $k$.
  For each $i \in \{1, 2, \ldots, r\}$ define $B_i = \bigl\{\, j \in \{1, 2, \ldots, N\} : bc^j \in C_i \,\bigr\}$.
  Then $\{1, 2, \ldots, N\} = \bigcup_{i=1}^r B_i$, and by van der Waerden's Theorem we may pick $i \in \{1, 2, \ldots, r\}$ and $e$, $f \in \bbN$ with $\{e, e+f, \ldots, e+(k-1)f\} \subseteq B_i$.
  
  By definition of $B_i$ we have that $bc^{e+jf} \in C_i$ for all $j \in \{0, 1, \ldots, k-1\}$.
  To finish the proof simply put $a = bc^e$ and $d = c$.
\end{proof}

While we get Theorem \ref{thm:semigrp-vdw} for free from van der Waerden's Theorem there are three potential problems with such a straightforward approach:
Our increment $d$ may be a right identity in our underlying semigroup, and, even if $d$ is not a right identity there is no guarantee that all the elements in $\{a, ad, \ldots, ad^{k-1}\}$ are distinct.
(The introduction of \cite{Bergelson:1992fk} contains an example for both of these problems.)
The last potential problem is more subtle and can only occur when the underlying semigroup is noncommutative.
To precisely formulate this subtle problem we make a brief detour to quickly review some needed algebraic definitions and results.

\subsection{Semigroup Theory}
We give a laconic review of the basic definitions and results of semigroup theory.
The interested reader can consult the article \cite{Hollings:2007uq} for a more expansive, but still brief, introduction to algebraic semigroup theory or the monographs \cite{Clifford:1961fk}, \cite{Clifford:1967fk}, and \cite[Chapter 1]{Hindman:1998fk} for more extensive information. 

Throughout this subsection we let $(S, \cdot)$ be some fixed semigroup. 

For each $x \in S$ we define the functions $\lambda_x \colon S \to S$ and $\rho_x \colon S \to S$ by $\lambda_x(y) = xy$ and $\rho_x(y) = yx$. 
For $A \subseteq S$ and $x \in S$, we use the special notations $x^{-1}A$ and $Ax^{-1}$ to refer to $\lambda_x^{-1}[A]$ and $\rho_x^{-1}[A]$, respectively. 
Equivalently, $x^{-1}A = \{\, y \in S : xy \in A \,\}$ and $Ax^{-1} = \{\, y \in S : yx \in A \,\}$.
(If $S$ is commutative, we usually denote its binary operation by $+$ instead of $\cdot$ and write $x^{-1}A$ and $Ax^{-1}$ as $-x+A$ and $A-x$, respectively.)
We call an element $e \in S$ an \emph{idempotent} if and only if $ee = e$.

We call $L \subseteq S$ a \emph{left ideal of $S$} if and only if $L$ is nonempty and for all $x \in S$, $\lambda_x[L] \subseteq L$. 
We call $R \subseteq S$ a \emph{right ideal of $S$} if and only if $R$ is nonempty and for all $x \in S$, $\rho_x[R] \subseteq R$. 
Finally, we call $\emptyset \ne I \subseteq S$ a \emph{(two-sided) ideal of $S$} if and only if $I$ is both a left and right ideal.

We call a left ideal a \emph{minimal left ideal} if and only if it does not properly contain a left ideal.
We define a \emph{minimal right ideal} and \emph{minimal two-sided ideal} similarly.
There can be at most one minimal two-sided ideal in a semigroup, and if this minimal ideal exists, then it is contained in every ideal of our semigroup.
We denote this \emph{smallest ideal}, if it exists, by $K(S)$.%
\endnote{
  The use of $K(S)$ to denote the smallest ideal comes from the Russian mathematician Suschkewitsch.
  He called the smallest ideal the \emph{kernel} of the semigroup.
  Suschkewitsch, according to the description given by \cite{Hollings:2009uq}, in \cite{Suschkewitsch:1928kx} proved that all finite semigroups have a smallest ideal and using this fact was able to produce a structure theorem for finite semigroups. 
}

The existence of the smallest ideal essentially depends on what may be regarded as certain `boundedness' conditions on the semigroup.
For instance, it is a classical result in algebraic semigroup theory that every finite semigroup contains a smallest ideal.
Another example of a boundedness condition that implies the existence of a smallest ideal is the existence of a minimal left ideal with an idempotent element \cite[Theorem 1.59]{Hindman:1998fk}. 
Using this boundedness condition we have the following important result.

\begin{thm}
  \label{thm:smallest-subsemigrp}
  Let $(S, \cdot)$ be a semigroup with a minimal left ideal of $S$ that has an idempotent. 
  Let $T$ be a subsemigroup of $S$ and assume that $T$ has a minimal left ideal of $T$ with an idempotent.
  Then $K(T) = K(S) \cap T$.
\end{thm}
\begin{proof}
  A proof of this fact is in \cite[Theorem 1.65]{Hindman:1998fk}.
\end{proof}

The final boundedness condition that we shall be interested in occurs when $S$ has a compact Hausdorff topology that interacts appropriately with the algebraic structure of $S$.

We call $S$ a \emph{compact right-topological semigroup} if and only if $S$ is a compact Hausdorff topological space and a semigroup such that the map $\rho_x$ is continuous for every $x \in S$.
Every compact right-topological semigroup contains an idempotent and the smallest ideal.
(The existence of an idempotent is proved in \cite[Theorem 2.5]{Hindman:1998fk}, while the existence of the smallest ideal is proved in \cite[Theorem 2.8]{Hindman:1998fk}.)

\subsection{Algebra in the Stone-\v{C}ech Compactification}
Let $(S, \cdot)$ be a fixed discrete semigroup, that is, $S$ is a semigroup with the discrete topology. 
In this subsection we describe how we can densely embed $S$, and extend its semigroup operation, into a compact right-topological semigroup.

Put $\beta S = \{\, p : \mbox{$p$ is an ultrafilter on $S$} \,\}$ and identify the elements of $S$ with the principal ultrafilters.
We topologize $\beta S$ as follows: For each $A \subseteq S$ define $\overline{A} = \{\, p \in \beta S : p \in A \,\}$.
Then $\{\, \overline{A} : A \subseteq S \,\}$ forms a basis for a compact Hausdorff topology on $\beta S$ which is the Stone-\v{C}ech Compactification \cite[Theorem 3.27]{Hindman:1998fk} of the discrete space $S$.

We can extend the semigroup operation of $S$ to $\beta S$ \cite[Theorem 4.1]{Hindman:1998fk} such that for all $p$, $q \in \beta S$, we have $A \in p \cdot q$ if and only if $\{\, x \in S : x^{-1}A \in q \,\} \in p$ \cite[Theorem 4.12(b)]{Hindman:1998fk}.
Moreover, this extension turns $\beta S$ into a compact right-topological semigroup with the property that for all $s \in S$, $\lambda_s$ is continuous. 
Therefore $\beta S$ has at least one idempotent (it typically has many more) and the smallest ideal $K(\beta S)$ exists. 

\subsection{Arithmetic Progression and Algebraic Lines}
The arithmetic progressions of positive integers interact nicely with the algebraic structure of $(\beta \bbN, +)$ (and also, $(\beta \bbN, \cdot)$). 
To see this interaction we define a special subset of $\bbN$ and prove, via Theorem \ref{thm:semigrp-vdw}, that this special subset is `partition regular'.%
\endnote{
  The close connection between partition regularity (although not using this terminology) and filters was first noticed by Choquet in \cite{Choquet:1947uq}.
  Choquet contribution can be roughly stated as saying that studying partition regular sets is equivalent to studying filters. 
}

\begin{defn}
  Let $\calR$ be a nonempty family of sets.
  We say $\calR$ is \emph{partition regular} if and only if whenever $\calF$ is a finite family of sets and $\bigcup \calF \in \calR$, there exists $A \in \calF$ and $B \in \calR$ with $B \subseteq A$.
\end{defn}
\begin{rmk}
  Given some `property' $\Phi$ of a nonempty set $S$, we call $\Phi$ \emph{partition regular} if and only if whenever $A \subseteq S$ has property $\Phi$, $r$ is a positive integer, and $A = \bigcup_{i=1}^r C_i$, then there exists $i \in \{1, 2, \ldots, r\}$ such that $C_i$ has property $\Phi$.
\end{rmk}

\begin{defn}
  We call $A \subseteq \bbN$ an \emph{$AP$-set} if and only if for every $k \in \bbN$, $A$ contains a $k$-term arithmetic progression.
\end{defn}

\begin{thm}
  \label{thm:ap-partition-reg}
  Let $A \subseteq \bbN$ be an $AP$-set and $r \in \bbN$.
  If $A = \bigcup_{i=1}^r C_i$, then there exists $i \in \{1, 2, \ldots, r\}$ such that $C_i$ is an $AP$-set.
\end{thm}
\begin{proof}
  Observe that it suffices to show that for each positive integer $k$, there exists $i \in \{1, 2, \ldots, r\}$ such that $C_i$ contains a $k$-term arithmetic progression.
  (Suppose that this particular claim is true, then for every positive integer $k$, there exists $i_k \in \{1, 2, \ldots, r\}$ such that $C_{i_k}$ contains a $k$-term arithmetic progression. 
  By the pigeonhole principle there exists $i' \in \{1, 2, \ldots, r\}$ such that $\{\, k \in \bbN : i' = i_k \,\}$ is infinite.
  Hence $C_{i'}$ contains a $k$-term arithmetic progression for infinitely many $k$'s. 
  Finally, note that if $k$ is a positive integer with $k > 1$, and a subset of $\bbN$ has a $k$-term arithmetic progression, then it also has a $(k-1)$-term arithmetic progression.
  Hence $C_{i'}$ is an $AP$-set.)

  So let $k \in \bbN$ and pick a positive integer $N$ as guaranteed by Theorem \ref{thm:semigrp-vdw} for $k$ and $r$.
  Since $A$ is an $AP$-set, pick positive integers $b$ and $c$ with $\{b+c, b+2c, \ldots, b+Nc\} \subseteq A$. 
  Since $\{b+c, b+2c, \ldots, b+Nc \} \subseteq A = \bigcup_{i=1}^r C_i$ we may pick $i \in \{1, 2, \ldots, r\}$ and $a$, $d \in \bbN$ such that $\{a, a+d, \ldots, a+(k-1)d\} \subseteq C_i$.
\end{proof}

By Theorem \ref{thm:ap-partition-reg} and \cite[Theorem 3.11]{Hindman:1998fk} we have that the following subset of $\beta \bbN$ is nonempty.

\begin{defn}
  $\AP = \{\, p \in \beta \bbN : \mbox{for every $A \in p$, $A$ is an $AP$-set} \,\}.$
\end{defn}

\begin{thm}
  $\AP$ is a closed ideal of $(\beta \bbN, +)$ and $(\beta \bbN, \cdot)$.
\end{thm}
\begin{proof}
  The fact that $\AP$ is an ideal of $(\beta \bbN, +)$ and $(\beta \bbN, \cdot)$ is proved in \cite[Theorem 14.5]{Hindman:1998fk}. 
  The fact that $\AP$ is closed is easy to see using the following common technique.
  Let $p \not\in \AP$ and pick $A \in p$ such that $A$ is not an $AP$-set.
  Then $\overline{A} \cap \AP = \emptyset$, that is, a (basic open) neighborhood of $p$ is contained in the complement of $\AP$.
\end{proof}

We are now in a position to formulate our subtle problem mentioned earlier.
Therefore we start by simply modifying the definition of an $AP$-set, Theorem \ref{thm:ap-partition-reg}, and the definition of $\AP$ to be applicable to a semigroup.

\begin{defn}
  Let $(S, \cdot)$ be a semigroup.
  \begin{itemize}
    \item[(a)] Given $a$, $d \in S$ and a positive integer $k$ we call the set $\{a, ad, \ldots, ad^{k-1}\}$ a \emph{$k$-term algebraic line}. 

    \item[(b)] We call $A \subseteq S$ an \emph{$AL$-set} if and only if for every $k \in \bbN$, $A$ contains a $k$-term algebraic line.

    \item[(c)] $\AL(S) = \{\, p \in \beta S : \mbox{for every $A \in p$, $A$ is an $AL$-set} \,\}$.
  \end{itemize}
\end{defn}

\begin{thm}
  \label{thm:al-partition-reg}
  Let $(S, \cdot)$ be a semigroup, $A \subseteq S$ an $AL$-set, and $r \in \bbN$.
  If $A = \bigcup_{i=1}^r C_i$, then there exists $i \in \{1, 2, \ldots, r\}$ such that $C_i$ is an $AL$-set.
\end{thm}
\begin{proof}
  Simliar to Theorem \ref{thm:ap-partition-reg} it suffices to prove the superficially weaker assertion that for each positive integer $k$, there exists $i \in \{1, 2, \ldots, r\}$ such that $C_i$ contains a $k$-term algebraic line.
  
  To this end pick a positive integer $N$ for $r$ and $k$ as guaranteed by Theorem \ref{thm:semigrp-vdw}. 
  Pick elements $b$ and $c$ in our semigroup such that $\{b, bc, \ldots, bc^{N+1}\} \subseteq A$. 
  Since $\{b, bc, \ldots, bc^{N+1}\} \subseteq A = \bigcup_{i=1}^r C_i$, it follows from Theorem \ref{thm:semigrp-vdw} that there exists $i \in \{1, 2, \ldots, r\}$ such that $C_i$ contains a $k$-term algebraic line.
\end{proof}

\begin{thm}
  Let $(S, \cdot)$ be a semigroup.
  Then $\AL(S)$ is a closed left ideal of $\beta S$.
\end{thm}
\begin{proof}
  The fact that $\AL(S)$ is nonempty follows from Theorem \ref{thm:al-partition-reg} and \cite[Theorem 3.11]{Hindman:1998fk}. 

  To see that $\AL(S)$ is closed let $p \not\in \AL(S)$ and pick $A \in p$ such that $A$ is not an $AL$-set.
  Then $\overline{A} \cap \AL(S) = \emptyset$, that is, a (basic open) neighborhood of $p$ is contained in the complement of $\AL(S)$.

  Finally to see that $\AL(S)$ is a left ideal, let $p \in \beta S$ and $q \in \AL(S)$. 
  Let $A \in pq$, then $\{\, x \in S : x^{-1}A \in q \,\} \in p$ and so we may pick $x \in S$ such that $x^{-1}A \in q$. 
  We show that $A$ is an $AL$-set.
  Let $k$ be a positive integer.
  Pick elements $b$ and $d$ in $S$ such that $\{b, bd, \ldots, bd^{k-1}\} \in x^{-1}A$.
  Put $a = xb$ and observe that $\{a, ad, \ldots, ad^{k-1}\} \subseteq A$.
\end{proof}

While $\AL(S)$ and $\AP$ are both closed left ideals of $\beta S$ and $\beta \bbN$, respectively, the next result shows that $\AL(S)$ is not a right ideal in every semigroup. 

\begin{thm}
  \label{thm:AL-not-left-ideal}
  Let $S$ be the free semigroup on two generators $a$ and $b$.
  Then $\AL(S)$ is not a right ideal of $\beta S$.
\end{thm}
\begin{proof}
  To see that $\AL(S)$ is not a right ideal of $\beta S$ we show that there exists $p \in \AL(S)$ such that $pa \not\in \AL(S)$. 
  Put $B = \{\, b^n : n \in \bbN \,\}$ and pick $p \in \AL(S)$ with $B \in p$. 
  (By \cite[Theorem 3.11]{Hindman:1998fk} and Theorem \ref{thm:al-partition-reg} since $B$ is an $AL$-set such a $p$ exists.)
  By \cite[Exercise 4.1.8(b)]{Hindman:1998fk}, $Ba \in pa$. 

  We show that $Ba$ is not an $AL$-set by showing that $Ba$ doesn't contain a 2-term algebraic line. 
  Suppose there exists $c$, $d \in S$ with $\{c, cd\} \subseteq Ba$. 
  Pick positive integers $i$ and $j$ such that $c = b^ia$ and $cd = b^ja$.
  Then $b^ja = cd = b^iad$.
  If $i < j$, then $b^{j-i}a = ad$.
  If $i > j$, then $b^{i-j}ad = a$.
  However, both of these implications produces a contradiction since $b$ is the leftmost letter of $b^{j-i}a$ and $b^{i-j}a$.
  If $i = j$, then $a = ad$, that is, $d$ must be the empty word.
  This is also a contradiction since the empty word is not in the free semigroup.
  Hence $Ba$ is not an $AL$-set and we have $\overline{Ba} \cap \AL(S) = \emptyset$, that is, $pa \not\in \AL(S)$. 
\end{proof}

\section{Piecewise Syndetic and Central Sets}
The result embodied in Theorem \ref{thm:AL-not-left-ideal} is aesthetically disturbing since $\AL(S)$ may not be a right ideal when $S$ is noncommutative. 
To recover this property in $\beta S$ we shall specialize and drastically modify the definition of an $AP$-set when we have a (noncommutative) semigroup.
The two modifications we mention in this section are piecewise syndetic sets and central sets.
Since the definition of a piecewise syndetic set is, initially, somewhat difficult to understand, we choose to give some motivation on how this concept can be `naturally' derived before explicitly defining it.


\subsection{Syndetic Sets}
We start by proving that a certain statement is equivalent to van der Waerden's Theorem.

\begin{thm}
  \label{thm:vdwEqSyn}
  The following statements are equivalent.
  \begin{itemize}
    \item[(a)]
      For every positive integer $k$, if $\bbN = C_1 \cup C_2$, then either $C_1$ or $C_2$ contains a $k$-term arithmetic progression. 

    \item[(b)]
      For every positive integer $k$ there exists a positive integer $N$ such that if $\{1, 2, \ldots, N\} = C_1 \cup C_2$, then either $C_1$ contains a $k$-term arithmetic progression or $C_2$ contains a $k$-term arithmetic progression.

    \item[(c)]
      For every positive integers $r$ and $k$, there exists a positive integer $N$ such that if $\{1, 2, \ldots, N\} = \bigcup_{i=1}^r C_i$, then there exists $i \in \{1, 2, \ldots, r\}$ such that $C_i$ contains a $k$-term arithmetic progression.

    \item[(d)]
      Let $r$ be a positive integer.
      If $\bbN = \bigcup_{i=1}^r C_i$, then for all $k \in \bbN$, there exists $i \in \{1, 2, \ldots, r\}$ such that $C_i$ contains a $k$-term arithmetic progression.

    \item[(e)]
      Let $r$ be a positive integer.
      If $\bbN = \bigcup_{i=1}^r C_i$, then there exists $i \in \{1, 2, \ldots, r\}$ such that for all $k \in \bbN$, there exist $a$, $d \in \bbN$ with $\{\, a, a+d, \ldots, a+k d \,\} \subseteq C_i$. 
      
    \item[(f)] 
      Let $\la x_n \ra_{n=1}^\infty$ be a strictly increasing sequence in $\bbN$ with $\max\{\, x_{n+1} - x_n : n \in \bbN \,\}$ finite.
      Then for all $k \in \bbN$, the set $\{\, x_n : n \in \bbN \,\}$ contains a $k$-term arithmetic progression.
  \end{itemize}
\end{thm}
\begin{proof}
  \textsl{(a) $\Rightarrow$ (b).}%
  \endnote{
    The technique used to prove the implication \textsl{(a) $\Rightarrow$ (b)} is commonly called a `compactness argument'. 
  This particular name comes from the Compactness Theorem in first-order logic which states that any set of first-order sentences has a model if and only if every finite subset has a model. 
  Also, topological compactness can be used to establish this `finitary' result. 
  The Compactness Theorem itself is closely related to the Ultrafilter Principle. 
  (Moreover, depending on how the Compactness Theorem is stated, it is actually equivalent to the Ultrafilter Principle.)
  Recall that the Ultrafilter Principle states that every filter can be extended to an ultrafilter.
  Also, the Ultrafilter Principle is equivalent to the statement that the product of compact Hausdorff topological spaces is compact. 
  }
  Suppose that the statement \textsl{(b)} is false, that is, suppose there exists a positive integer $k$ such that for every $N \in \bbN$ there exist sets $C_{1,N}$ and $C_{2,N}$ with $\{1, 2, \ldots, N\} = C_{1, N} \cup C_{2, N}$ but neither $C_{1,N}$ or $C_{2,N}$ contains a $k$-term arithmetic progression. 

  We shall recursively construct sequences $\la r_i \ra_{i=1}^\infty$ and $\la \mathbf{N}_i \ra_{i=0}^\infty$ satisfying the following hypotheses:
  \begin{itemize}
    \item[(1)]
      $\mathbf{N}_0 = \bbN$.

    \item[(2)]
      For all positive integers $i$, $\mathbf{N}_i = \{\, N \in \mathbf{N}_{i-1} : i \in C_{r_i, N} \,\}$.

    \item[(3)]
      For all positive integers $i$, $\mathbf{N}_i$ is infinite.

    \item[(4)] 
      For all nonnegative integers $i$, $\mathbf{N}_{i+1} \subseteq \mathbf{N}_i$.
  \end{itemize}

  Put $\mathbf{N}_0 = \bbN$ and by the pigeonhole principle, pick $r_1 \in \{1, 2 \}$ such that $\{\, N \in \mathbf{N}_0 : 1 \in C_{r_1, N} \,\}$ is infinite, and put $\mathbf{N}_1 = \{\, N \in \mathbf{N}_0 : 1 \in C_{r_1, N} \,\}$.
  Then hypotheses (1) through (4) are satisfied by $\la r_i \ra_{i=1}^1$ and $\la \mathbf{N}_i \ra_{i=0}^1$.
  Now let $m > 1$, and assume that the sequences $\la r_i \ra_{i=1}^{m-1}$ and $\la \mathbf{N}_i \ra_{i=0}^{m-1}$ have been chosen to satisfy hypotheses (1) through (4).
  
  Since $\mathbf{N}_{m-1}$ is infinite, by the pigeonhole principle we may pick $r_m \in \{1, 2\}$ such that $\{\, N \in \mathbf{N}_{m-1} : m \in C_{r_m, N} \,\}$ is infinite. 
  Put $\mathbf{N}_m = \{\, N \in \mathbf{N}_{m-1} : m \in C_{r_m, N} \,\}$.
  Then it is routine to verify that the sequences $\la r_i \ra_{i=1}^m$ and $\la \mathbf{N}_i \ra_{i=0}^m$ satisfy hypotheses (1) through (4).

  Observe that, by hypothesis (2), for each $i \in \bbN$, $i \in C_{r_i, N}$ for every $N \in \mathbf{N}_i$.
  Therefore for each $j \in \{1, 2\}$ we define $C_j = \{\, i \in \bbN : \mbox{$i \in C_{r_i, N}$ where $r_i = j$ and $N \in \mathbf{N}_i$} \,\}$.
  By hypothesis (4), this definition is well-defined.
  We have that $\bbN = C_1 \cup C_2$, but we claim that $C_1$ and $C_2$ does not contain a $k$-term arithmetic progression. 
  If this claim is true, then we have reached a contradiction that proves our implication.

  Suppose that there exist positive integers $a$ and $d$ with $\{a, a+d, \ldots, a+(k-1)d \,\} \subseteq C_1$. 
  Pick $N \in \mathbf{N}_{a+(k-1)d}$, and observe by hypothesis (4) and the definition of $C_1$, we have that $\{a, a+d, \ldots, a+(k-1)d\} \subseteq C_{1,N}$. 
  However, by choice $C_{1,N}$ doesn't contain any $k$-term arithmetic progressions. 
  Hence $C_1$ doesn't contain a $k$-term arithmetic progression and similarly we can show that $C_2$ doesn't contain a $k$-term arithmetic progression either. 

  \textsl{(b) $\Rightarrow$ (c).}
  We start by introducing some temporary notation.
  For all positive integers $k$ and $r$ we let $W(k,r)$ be the least positive integer such that if $\{1, 2, \ldots, W(k,r)\} = \bigcup_{i=1}^r C_i$, then there exists $i \in \{1, 2, \ldots, r\}$ such that $C_i$ contains a $k$-term arithmetic progression.

  For all $k \in \bbN$, $W(k, 1)$ trivially exists, and $W(k, 2)$ exists by assumption.
  Let $r > 2$ and assume that for all $k \in \bbN$, $W(k, r-1)$ exists. 
  Put $N = W\bigl( W(k, r-1)+1, 2 \bigr)$ and let $\{1, 2, \ldots, N\} = \bigcup_{i=1}^r C_i$. 
  Put $D_1 = \bigcup_{i=1}^{r-1} C_i$ and $D_2 = C_r$.
  Then by assumption either $D_1$ or $D_2$ contains a $\bigl(W(k,r-1)+1\bigr)$-term arithmetic progression.
  If $D_2$ contains a $\bigl(W(k,r-1)+1\bigr)$-term arithmetic progression, then, by observing that $W(k,r-1) \ge k$, we're done. 

  Suppose that $D_1$ contains a $\bigl(W(k,r-1) + 1\bigr)$-term arithmetic progression, that is, pick positive integers $b$ and $c$ such that $\{b, b+c, \ldots, b+W(k,r-1)c\} \subseteq \bigcup_{i=1}^{r-1} C_i$. 
  For each $i \in \{1, 2, \ldots, r-1\}$ define $E_i = \bigl\{\, j \in \{1, 2, \ldots, W(k,r-1) \} : b+jc \in C_i \,\bigr\}$.
  Then $\{1, 2, \ldots, W(k, r-1)\} = \bigcup_{i=1}^{r-1} E_i$ and by our inductive hypothesis there exists $i \in \{1, 2, \ldots, r-1\}$ such that $E_i$ contains a $k$-term arithmetic progression, that is, there exists $e$, $f \in \bbN$ such that $\{e, e+f, \ldots, e+(k-1)f\} \subseteq E_i$. 

  Put $a = b+ec$ and $d = fc$, then by definition of $E_i$ we have that for every $j \in \{0, 1, \ldots, k-1\}$, $a + jd = b + ec + jfc = b+(e+jf)c \in C_i$.
  
  
  \textsl{(c) $\Rightarrow$ (d).}
  This assertion is trivially true.

  \textsl{(d) $\Rightarrow$ (e).}
  For each $k \in \bbN$ pick $i_k \in \{1, 2, \ldots, r\}$ such that $C_{i_k}$ contains a $k$-term arithmetic progression. 
  By the pigeonhole principle, there exists $i \in \{1, 2, \ldots, r\}$ such that $\{\,k \in \bbN : i_k = i\,\}$ is infinite.
  Therefore it follows that $C_i$ is an $AP$-set.

  \textsl{(e) $\Rightarrow$ (f).}
  Let $\la x_n \ra_{n=1}^\infty$ be a strictly increasing sequence in $\bbN$ with $\max\{\, x_{n+1} - x_n : n \in \bbN \,\}$ finite. 
  Put $b =\max\bigl(\{\, x_{n+1} - x_n : n \in \bbN \,\} \cup \{x_1\}\bigr)$ and $A = \{\, x_n : n \in \bbN \,\}$. 
  We claim that $\bbN = \bigcup_{t=1}^b -t+A$. 
  Suppose temporarily that this claim is true.
  We can then apply \textsl{(e)} to pick $i \in \{1, 2, \ldots, b\}$ such that the set $-i + A$ is an $AP$-set. 
  From this choice, it follows that $A$ contains a $k$-term arithmetic progression for every $k \in \bbN$. 
  We now prove our claim.
  
  Clearly, $\bigcup_{t=1}^b -t+A \subseteq \bbN$.
  Let $x \in \bbN$.
  First, assume that $x < x_1$, then since $x_1 \le b$, we can pick $t \in \{1, 2, \ldots, b\}$ such that $t + x = x_1$, that is, $x \in -t+A$.
  Now assume that $x_1 \le x$.
  Since $\la x_n \ra_{n=1}^\infty$ is a strictly increasing sequence, we can pick $n \in \bbN$ such that $x_n \le x < x_{n+1}$.
  Moreover, since $x_{n+1} - x_n \le b$, we can pick $t \in \{1, 2, \ldots, b\}$ such that $t + x = x_{n+1}$, that is, $x \in -t + A$. 
  This completes the proof for this direction. 

  \textsl{(f) $\Rightarrow$ (a).}
  Without loss of generality suppose that $C_1$ is infinite.
  Enumerate $C_1$ as a strictly increasing sequence $\la x_n \ra_{n=1}^\infty$. 
  If $\max\{\, x_{n+1} - x_n : n \in \bbN \,\}$ is finite, then we are done. 
  Hence suppose instead that $\max\{\, x_{n+1} - x_n : n \in \bbN \,\}$ is infinite, that is, for all $k \in \bbN$, there exists $n \in \bbN$ with $x_{n+1} - x_n \ge k + 2$. 
  Therefore, for all $k \in \bbN$, there exists $n \in \bbN$ such that $\{\, x_n + 1, x_n + 2, \ldots, x_n + (k + 1) \,\} \subseteq \bbN \setminus C_1 = C_2$, that is, $C_2$ is an $AP$-set.
\end{proof}

We wish to translate statement (f) of Theorem \ref{thm:vdwEqSyn} into the language of semigroups.
Of course, given an arbitrary semigroup, there is no guarantee that the terms ``strictly increasing'' and ``distance between two elements'' makes sense.
It is the goal of the next result to show that we can forgo these terms.

In what follows, if $X$ is a set, we let $\Pf(X)$ denote the set of all nonempty finite subsets of $X$. 

\begin{prop}
  \label{prop:syn}
  Let $A \subseteq \bbN$ be infinite.
  The following statements are equivalent.
  \begin{itemize}
    \item[(a)] Enumerate $A$ as a strictly increasing sequence $\la x_n \ra_{n=1}^\infty$.
      Then $\max\{\, x_{n+1} - x_n : n \in \bbN \,\}$ is finite.

    \item[(b)] There exists $G \in \Pf(\bbN)$ such that $\bbN = \bigcup_{t \in G} -t + A$. 
  \end{itemize}
\end{prop}
\begin{proof}
  \textsl{(a) $\Rightarrow$ (b).}
  Let $b = \max\bigl(\{\, x_{n+1} - x_n : n \in \bbN \,\} \cup \{x_1\}\bigr)$ and put $G = \{1, 2, \ldots, b\}$. 
  Clearly, $\bigcup_{t \in G} -t + A \subseteq \bbN$ so let $x \in \bbN$. 
  First, assume that $x < x_1$, then since $x_1 \le b$, we can pick $t \in G$ such that $t + x = x_1$, that is $x \in -t + A$.
  Now assume that $x_1 \le x$.
  Since $\la x_n \ra_{n=1}^\infty$ is strictly increasing, there exists $n \in \bbN$ such that $x_n \le x < x_{n+1}$.  
  Then $1 \le x_{n+1} - x \le x_{n+1} - x_n \le b$, that is, $x_{n+1} - x \in G$.
  Hence $(x_{n+1} - x) + x = x_{n+1} \in A$, and this completes the forward direction of the proof.

  \textsl{(b) $\Rightarrow$ (a).}
  Enumerate $A$ as a strictly increasing sequence $\la x_n \ra_{n=1}^\infty$. 
  Pick $b \in \bbN$ such that $G \subseteq \{1, 2, \ldots, b\}$.
  We will show that $\max\{\, x_{n+1} - x_n : n \in \bbN \,\} \le b$. 

  Let $n \in \bbN$.
  Since $\bbN = \bigcup_{t \in G} -t+A$ and $x_n \in \bbN$, pick $t \in G$ such that $t + x_n \in A$.
  Hence pick $m \in \bbN$ such that $x_m = t + x_n$, that is, $x_m - x_n = t \le b$. 
  Observe that $x_{n+1} \le x_m$.
  Therefore it follows that $x_{n+1} - x_n \le x_m - x_n \le b$, and this completes the proof of the reverse direction.
\end{proof}

\begin{defn}
  Let $(S, \cdot)$ be a semigroup and $A \subseteq S$.
  We call $A$ a \emph{syndetic (set in $S$)} if and only if there exist $G \in \Pf(S)$ such that $S = \bigcup_{t \in G} t^{-1}A$. 
\end{defn}

Even though we have successfully translated Theorem \ref{thm:vdwEqSyn}(b) into algebraic terms it's an unfortunate fact that the notion of a syndetic set is \emph{not} partition regular. 
(For instance, put $A = \bigcup_{i=1}^\infty \{2^n, 2^n+1, 2^n+2, \ldots, 2^n+n\}$ and put $B = \bbN \setminus A$, then $\bbN = A \cup B$ but neither $A$ nor $B$ is syndetic.)
(Although syndetic sets do intereact nicely with smallest ideal of $\beta S$; see \cite[Theorems 4.39 and 4.43]{Hindman:1998fk}.)
In order to recover partition regularity, we weaken the definition of a syndetic set to obtain a piecewise syndetic set.

\subsection{Piecewise Syndetic Sets}
For a first definition of a piecewise syndetic set we introduce some temporary terminology and notation.
Given $F \in \Pf(\bbN)$ with $|F| = n$, enumerate $F$ as a strictly increasing sequence $x_1 < x_2 < \cdots < x_n$. 
We define the \emph{gap size of $F$} as $g(F) = \max\bigr\{\, x_{j+1} - x_j : j \in \{1, 2, \ldots, n-1\} \,\bigl\}$.
We call a set $A \subseteq \bbN$ \emph{piecewise syndetic} if and only if there exists $b \in \bbN$ such that for all $N \in \bbN$, there exists $B \in \Pf(A)$ with $|B| \ge N$ and $g(B) \le b$.

It's clear that a syndetic set in $\bbN$ is a piecewise syndetic set in $\bbN$.
It's also clear that  parts of this definition may not make sense for arbitrarily semigroups.
It's is the purpose of this next result to show that we can dispense with the potentially troublesome parts.

\begin{prop}
  Let $A \subseteq \bbN$.
  The following statements are equivalent.
  \begin{itemize}
    \item[(a)] $A$ is piecewise syndetic.
    
    \item[(b)] There exists $G \in \Pf(\bbN)$ such that for all $F \in \Pf(\bbN)$, there exists $x \in \bbN$ such that $F+x \subseteq \bigcup_{t \in G} -t+A$. 
  \end{itemize}
\end{prop}
\begin{proof}
  \textsl{(a) $\Rightarrow$ (b).}
  Pick $b \in \bbN$ as guaranteed by the definition. 
  Put $G = \{1, 2, \ldots, b\}$.
  We show that for all $F \in \Pf(\bbN)$, there exists $x \in \bbN$ such that $F+x \subseteq \bigcup_{t \in G} -t + A$.

  Let $F \in \Pf(\bbN)$ and put $N =  \max F + 2$. 
  Pick $B \in \Pf(A)$ with $|B| \ge N$ and $g(B) \le b$. 
  Put $n = |B|$ and enumerate $B$ as a strictly increasing sequence $x_1 < x_2 < \cdots  < x_n$.
  It suffices to show that $F + x_1 \subseteq \bigcup_{t \in G} -t + B$.
  (Observe that $B \subseteq A$ implies $\bigcup_{t \in G} -t + B \subseteq \bigcup_{t \in G} -t + A$.)
  Let $f \in F$, then $f + x_1 \le \max F + x_1$. 
  Now $n \ge \max F + 2$ and so $f + x_1 \le (n-2) + x_1 < x_n$. 
  So pick $m \in \{1, 2, \ldots, n-1\}$ such that $x_m \le f+x_1  < x_{m+1}$. 
  Put $t = x_{m+1} - x_1 - f$, then $t + f + x_1 = x_{m+1} \in B$ and $t \in G$ since $1 \le t = x_{m+1}- (f + x_1) \le x_{m+1} - x_m \le b$. 
  This completes this direction of the proof.  
  
  \textsl{(b) $\Rightarrow$ (a).}
  Pick $G \in \Pf(\bbN)$ as guaranteed, and pick $b \in \bbN$ such that $G \subseteq \{1, 2, \ldots, b\}$. 
  Let $N \in \bbN$ and put $F = \{1, 2, \ldots, 2bN\}$. 
  Pick $x \in \bbN$ such that $F + x \subseteq \bigcup_{t \in G} -t+A$. 
  For every $i \in F$ pick the smallest $t_i \in G$ such that $t_i + f + x \in A$. 
  Let $B = \{\, t_i + f + x : i \in F \,\}$.
  We show that $g(B) \le b$ and $|B| \ge N$.

  To see that $g(B) \le b$ it suffices to show that $\{\, t_i + f : i \in F\}$ has gap size less than or equal to $b$.
  To this end arrange the sums in $\{1, 2, \ldots, b\} + F$ into the following array:
  \[
    \begin{array}[t]{ccccc}
      1+1 & 1+2 & 1+3 & \cdots & 1+2bN \\
      2+1 & 2+2 & 2+3 & \cdots & 2+2bN \\
      \vdots & \vdots & \vdots & \ddots & \vdots \\
      b+1 & b+2 & b+3 & \cdots & b+2bN 
    \end{array}
  \]
  Observe that numbers along an upward diagonal in the array share the same sum. 
  (For instance, $\{3+1, 2+2, 1+3\}$ have the same sum of 4.)
  Also observe that for each $i \in \{1, 2, \ldots, 2bN - 1\}$, $b + (i+1) - (1 +i) = b$ is the maximum distance between any two numbers from adjacent columns. 
  With our choice of $t_i$'s we pick exactly one number from each column of our array.
  Hence it follows that $g(B) \le b$.
  Moreover $|B| \ge N$ since the array has at least $2N$ distinct sums. 
\end{proof}

With this equivalence we now can define the notion of a piecewise
syndetic set in a semigroup. 
In the next chapter it will follow that piecewise syndetic sets in $\bbN$ are $AP$-sets.
In particular, syndetic sets are $AP$-sets.
(Hence by Theorem \ref{thm:vdwEqSyn} van der Waerden's Theorem follows.)
Moreover, unlike syndetic sets, we shall soon see that piecewise syndetic sets are partition regular.%
\endnote{
  In \cite[Lemma 1]{Brown:1971bh}, proves that if the natural numbers are finitely partitioned, then at least one cell of the partition is piecewise syndetic.
  It's an interesting question as to whether, Brown's Lemma can be extended to prove Proposition \ref{prop:psReg} directly.
}

\begin{defn}
  Let $(S, \cdot)$ be a semigroup and let $A \subseteq S$.
  We say $A$ is \emph{piecewise syndetic (set in S)} if and only if there exists $G \in \Pf(S)$ such that for all $F \in \Pf(S)$ there exists $x \in S$ with $Fx \subseteq \bigcup_{t \in G} t^{-1}A$.
\end{defn}

\begin{thm}
  \label{prop:psReg}
  Let $S$ be a semigroup and $A \subseteq S$ piecewise syndetic.
  If $A = C_1 \cup C_2$, then either $C_1$ is piecewise syndetic or $C_2$ is piecewise syndetic.
\end{thm}
\begin{proof}
  Pick $G \in \Pf(S)$ such that for all $F \in \Pf(S)$, there exists $x \in S$ such that $Fx \subseteq \bigcup_{t \in G} t^{-1}A$. 
  Suppose, to the contrary, that $C_1$ is not piecewise syndetic and $C_2$ is not piecewise syndetic. 
  Since $C_1$ is not piecewise syndetic, we can pick $F \in \Pf(S)$ such that for all $x \in S$, $Fx \setminus (\bigcup_{t \in G} t^{-1}C_1) \ne \emptyset$. 
  Since $C_2$ is not piecewise syndetic, we can pick $H \in \Pf(S)$ such that for all $x \in S$, $Hx \setminus (\bigcup_{t \in GF} t^{-1}C_2) \ne \emptyset$.
  Since $FH \in \Pf(S)$ pick $x \in S$ such that 
  \[
    FHx \subseteq \bigcup_{t \in G} t^{-1}(C_1 \cup C_2). 
  \]
  
  Pick $y \in H$ such that $yx \not\in \bigcup_{t \in GF} t^{-1}C_2$. 
  Pick $z \in F$ such that $zyx \not\in \bigcup_{t \in G} t^{-1}C_1$. 
  Now $zyx \in \bigcup_{t \in G} t^{-1}(C_1 \cup C_2)$, so pick $t \in G$ such that $tzyx \in C_1 \cup C_2$. 
  If $tzyx \in C_1$, then $zyx \in t^{-1}C_1$, a contradiction.
  If $tzyx \in C_2$, then $yx \in (tz)^{-1}C_2$, a contradiction.
  Hence we conclude that either $C_1$ is piecewise syndetic or $C_2$ is piecewise syndetic.
\end{proof}

  Piecewise syndetic sets interact nicely with the smallest ideal of $\beta S$ \cite[Theorem 4.40]{Hindman:1998fk} and moreover $c\ell\bigl(K(\beta S)\bigr) = \{\, p \in \beta S : \mbox{for every $A \in p$, $A$ is piecewise syndetic} \,\}$ is a closed ideal of $\beta S$ \cite[Corollary 4.41 and Theorem 4.44]{Hindman:1998fk} necessarily contained in every closed ideal of $\beta S$. 

\subsection{Central Sets}
\label{central-sets}

Furstenburg in \cite[Chapter 8]{Furstenberg:1981fk}, using notions from topological dynamics, defined the concept of a central subset of $\bbN$. 
With this definition he was able to prove a powerful combinatorial statement called the Central Sets Theorem.
(Which can be thought of as a simultaneous generalization of both van der Waerden's Theorem and Hindman's Theorem.)
The definition of a central set and the Central Sets Theorem can both be generalized to a semigroup.
However in contrast to our definition of a piecewise syndetic set, to describe a central subset of a semigroup using only its combinatorial and algebraic structure is shockingly complicated.%
  (The curious reader can consult \cite[Section 14.5]{Hindman:1998fk} for the details.)
By using the algebraic structure of the Stone-\v{C}ech compactification we can give a very simple definition of central sets.

\begin{defn}
  Let $(S, \cdot)$ be a semigroup and $A \subseteq S$.
  We call $A$ \emph{central} if and only if there exists an idempotent $p = pp \in K(\beta S)$ such that $A \in p$.
\end{defn}
\begin{rmk}
  This definition automatically implies (by \cite[Theorem 3.6(d)]{Hindman:1998fk}) that central sets are partition regular.   
\end{rmk}

Since central sets are combinatorial complicated, the Central Sets Theorem is often used as a convienent combinatorial substitute when applying central sets.
Hence much of the information known about centrals sets is derived from extending and studying the Central Sets Theorem.
In the next chapter we shall prove the newest version of the Central Sets Theorem currently known via another specialization of $AP$-sets.

% Endnotes 
\theendnotes

