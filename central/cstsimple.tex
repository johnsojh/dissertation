% Author: John H. Johnson
% email: john.j.jr@gmail.com
%
% Brief description of file
% -------------------------
%
% This is a chapter in my dissertation tentatively entitled "A New and
% Simpler Central Sets Theorem".  The new and simpler part is due to a
% different definition of J-sets, which in turns leads to a different
% definition of C-sets.  Happily the new definition is equivalent to
% the old definition.  Therefore no proofs need to be rewritten; but
% there is value in rewriting the proofs, since as this chapter shows,
% the rewritten proofs are often simpler than the old proofs.
%
% N.B. The new definition of J-sets essentially first appears in an
% article, "Ramsey Theory in Noncommutative Semigroups", by Bergelson
% and Hindman in their Theorem 2.6.

\documentclass[12pt]{article}

\usepackage{amsthm, amssymb, amsmath}
\usepackage{color}
\usepackage{endnotes}
\usepackage{url}


\usepackage[margin=1in]{geometry}

\usepackage[doublespacing]{setspace}
\usepackage{url}

\newtheoremstyle{plain}{3mm}{3mm}{\slshape}{}{\bfseries}{.}{.5em}{}
\theoremstyle{plain}

% Numbered theorems 
\newtheorem{thm}{Theorem}[section]
\newtheorem{lem}[thm]{Lemma}
\newtheorem{prop}[thm]{Proposition}
\newtheorem{cor}[thm]{Corollary}
\newtheorem{up}[thm]{Ultrafilter Principle}
\newtheorem{radoSelect}[thm]{Rado's Selection Lemma}
\newtheorem{php}[thm]{Pigeonhole Principle}
\newtheorem{vdw}[thm]{Van der Waerden's Theorem}
\newtheorem{hj}[thm]{Hales-Jewett Theorem}
\newtheorem{shj}[thm]{Special Hales-Jewett Theorem}


\newtheorem{FST}[thm]{Hindman's Theorem}
\newtheorem{MBR}[thm]{Multiple Birkhoff Recurrence Theorem}
\newtheorem{recur}[thm]{Recurrence Theorem}
\newtheorem{OCST}[thm]{Furstenburg's Original Central Sets Theorem}
\newtheorem{cst}[thm]{Central Sets Theorem}



\newtheorem{claim}[thm]{Claim}
\newtheorem{ques}[thm]{Question}
\newtheorem{conj}[thm]{Conjecture}


\theoremstyle{definition}

% Numbered "definition" style theorem environments
\newtheorem{defn}[thm]{Definition}
\newtheorem{rmk}[thm]{Remark}
\newtheorem{example}[thm]{Example}

\newcommand{\la}{\langle}
\newcommand{\ra}{\rangle}
\newcommand{\bbN}{\mathbb{N}}
\newcommand{\bbZ}{\mathbb{Z}}
\newcommand{\bbR}{\mathbb{R}}
\newcommand{\AP}{\mathcal{AP}}
\newcommand{\AL}{\mathcal{AL}}

% Short names for calligraphic math letters.
\newcommand{\calA}{\mathcal{A}}
\newcommand{\calB}{\mathcal{B}}
\newcommand{\calC}{\mathcal{C}}
\newcommand{\calE}{\mathcal{E}}
\newcommand{\calF}{\mathcal{F}}
\newcommand{\calG}{\mathcal{G}}
\newcommand{\calH}{\mathcal{H}}
\newcommand{\calI}{\mathcal{I}}
\newcommand{\calJ}{\mathcal{J}}
\newcommand{\calP}{\mathcal{P}}
\newcommand{\calR}{\mathcal{R}}
\newcommand{\calS}{\mathcal{S}}
\newcommand{\calT}{\mathcal{T}}
\newcommand{\calU}{\mathcal{U}}

\newcommand{\Pf}{\mathcal{P}_f}


\newcommand{\setfunc}[2]{\hbox{${}^{\hbox{$#1$}}\hskip -1 pt #2$}}

\font\bigmath=cmsy10 scaled \magstep 3
\newcommand{\bigtimes}{\hbox{\bigmath \char'2}}

\newcommand{\cchi}{\raise 2 pt \hbox{$\chi$}}

\begin{document}
\section{$J$-sets}
\begin{defn}
  Let $(S, \cdot)$ be a semigroup.
  \begin{itemize}
    \item[(b)] For each $m \in \bbN$, define
      \[
        \calJ_m = \{\, (t_1, t_2, \ldots, t_m) \in \bbN^m : t_1 < t_2 < \cdots < t_m \,\}.
      \]

    \item[(b)] Put $\calT(S) = \setfunc{\bbN}{S}$.
      If the semigroup is clear from context, we write $\calT$ instead of $\calT(S)$.

    \item[(c)] For each $m \in \bbN$, $a \in S^{m+1}$, $t \in \calJ_m$, and $f \in \calT$, put
      \[
        \textstyle
        x(m, a, t, f) = \Bigl( \prod_{i=1}^m \bigl( a(i)f(t_i) \bigr) \Bigr)a(m+1).
      \]

    \item[(d)] We call a subset $A \subseteq S$ a \textsl{$J$-set (in $S$)} if and only if for every $F \in \Pf(\calT)$ there exist $m \in \bbN$, $a \in S^{m+1}$, and $t \in \calJ_m$ such that for each $f \in F$ we have $x(m, a, t, f) \in A$.
  \end{itemize}
\end{defn}
\begin{rmk}
  Despite appearances to the contrary, I must point out that $J$-sets are \textsl{not} named after the author!
  In particular, the term $J$-set is derived from the term $J_Y$ set which first appeared as a definition in \cite[Definition 2.4(b)]{Hindman:1996fk}.
\end{rmk}

Our definition of a $J$-set looks different from the definitions given in \cite[Definition 2.2(a)]{Hindman:2009vn} and \cite[Definition 3.3(d)]{De:2008uq}.
The first result we prove shall be that differences between these two definitions are only superficial. 
However before proving this result we introduce some temporary notation that is analogous to $\calJ_m$.

\begin{defn}
  For each $m \in \bbN$ define
  \begin{align*}
    \calI_m &= \Bigl\{\, \bigl( H(1), H(2), \ldots, H(m) \bigr) : \hbox{$H(i) \in \mathcal{P}_f(\bbN)$ for all $i \in \{1, 2, \ldots, m\}$} \\
        &\hspace{3em} \hbox{ and $\max H(i) < \min H(i+1)$ for all $i \in \{1, 2, \ldots, m-1\}$} \Bigr\}.
  \end{align*}
\end{defn}

Given a $A$ a subset of some semigroup $S$, in \cite[Definition 2.2(a)]{Hindman:2009vn} $A$ is considered a $J$-set if and only if for every $F \in \calT$, there exists $m \in \bbN$, $a \in S^{m+1}$, and $H \in \calI_m$ such that for all $f \in F$, $\prod_{i=1}^n\bigl( a(i) \prod_{t \in H(i)} f(t) \bigr) a(m+1) \in A$.
To show that our definition of a $J$-set is equivalent to \cite[Definition 2.2(a)]{Hindman:2009vn} we will use the following technical ``rewriting'' lemma and its corollary.

\begin{lem}
  \label{lem:rewrite-jset}
  Let $(S, \cdot)$ be a semigroup, $m \in \bbN$, $a \in S^{m+1}$, $H \in \calI_m$, and $f \in \calT$. 
  Fix $b \in S$ and define $g \in \calT$ by $g(t) = f(t)b$. 
  Then there exists $n \in \bbN$, $c \in S^{n+1}$, and $t \in \calJ_n$ such that $x(n, c, t, f) = \prod_{i=1}^m \bigl( a(i) \prod_{t \in H(i)} g(t)\big) a(m+1)$.
\end{lem}
\begin{proof}
  Put $H(0) = \emptyset$ and for each $s \in \{0, 1, \ldots, m\}$ define $h_s = \sum_{i=0}^s |H(i)|$.
  Put $n = h_m$ and enumerate $\bigcup_{i=1}^m H(i)$ as a strictly increasing sequence $t_1 < t_2 < \cdots < t_n$ in $\bbN$. 
  We will adopt some temporary terminology and say that $\prod_{i=1}^m \bigl( a(i) \prod_{t \in H(i)} g(t) \bigr) a(m+1)$ has \textsl{proper representation} if and only if $\prod_{i=1}^m \bigl( a(i) \prod_{t \in H(i)} g(t) \bigr) a(m+1) = x(n, c, t, f)$ where $c \in S^{n+1}$ is defined as follows:
  \[
    c(j) = 
    \begin{cases}
      a(j) & \mbox{if $j = 1$;} \\
      b & \mbox{if $s \in \{0, 1, \ldots, m-1\}$ and} \\
      &   \hspace{2em}\mbox{$2+h_s \le j \le h_s$; and} \\
      ba(s+1) & \mbox{if $s \in \{1, 2, \ldots, m\}$ and $j = 1+h_s$.}
    \end{cases}
  \]
  {
    \small
    (To see how our $c$ was derived let's consider a reasonable small example with $m = 3$, $H(1) = \{3, 5\}$, $H(2) = \{7\}$, and $H(3) = \{9, 11, 15\}$.
    With these numbers we have
    \begin{align*}
      \textstyle
      \prod_{i=1}^3 \bigl( a(i) \prod_{t \in H(i)} g(t) \bigr) a(4) &=
      a(1) g(3)g(5) a(2) g(7) a(3) g(9)g(11)g(15) a(4) \\
      &= a(1) f(3)bf(5)b a(2) f(7)b a(3) f(9)bf(11)bf(15)b a(4).
    \end{align*}
    Therefore $n = 6$, $c(1) = a(1)$, $c(2) = b$, $c(3) = ba(2)$, $c(4) = ba(3)$, $c(5) = b$,  $c(6) = b$, and $c(7) = ba(4)$.)
  }

  We prove that $\prod_{i=1}^m \bigl( a(i) \prod_{t \in H(i)} g(t) \bigr) a(m+1)$ has proper representation by induction on $m$. 
  First suppose that $m = 1$, then 
  \[
    \textstyle
    \prod_{i=1}^1 \bigl( a(i) \prod_{t \in H(i)} g(t) \bigr) a(2) = a(1) f(t_1)b  f(t_2)b \cdots f(t_n)b a(2).
  \]
  In this case $h_0 = 0$, $h_1 = n$, and so $s$ can only be 0 or 1.
  If $2+h_0 = 2 \le j \le h_1 = n$, then by definition of $c$ we have $c(j) = b$ for all $j \in \{2, 3, \ldots, n\}$. 
  Also since $1 + h_1 = n+1$, we have $c(n+1) = ba(2)$. 
  Therefore
  \[
    \textstyle
    a(1) f(t_1)b  f(t_2)b \cdots f(t_n)b a(2) = c(1) f(t_1) c(2) f(t_2) c(3) \cdots f(t_n) c(n+1),
  \]
  and so $\prod_{i=1}^1 \bigl( a(i) \prod_{t \in H(i)} g(t) \bigr) a(2)$ has proper representation. 

  Now let $m > 1$ and assume that $\prod_{i=1}^{m-1} \bigl( a(i) \prod_{t \in H(i)} g(t) \bigr) a(m)$ has proper representation with $\prod_{i=1}^{m-1} \bigl( a(i) \prod_{t \in H(i)} g(t) \bigr) a(m) = x(n, c, t, f)$. 
  Then we have 
  \begin{align*}
    \textstyle
    \prod_{i=1}^{m} \bigl( a(i) \prod_{t \in H(i)} g(t) \bigr) a(m+1) &= \textstyle
    \prod_{i=1}^{m-1} \bigl( a(i) \prod_{t \in H(i)} g(t) \bigr) a(m) \prod_{t \in H(m)} g(t) a(m+1), \\
    &= \textstyle 
    x(n, c, t, f) \prod_{t \in H(m)} g(t) a(m+1).
  \end{align*}
  Now $c(n+1) \prod_{t \in H(m)} g(t) a(m+1)$ has proper representation, say with, $\prod_{t \in H(m)} g(t) a(m+1) = x(p, d, u, f)$.
  By translating the indices for $u$ and $d$ it follows that $\prod_{i=1}^{m} \bigl( a(i) \prod_{t \in H(i)} g(t) \bigr) a(m+1)$ has proper representation.
\end{proof}

\begin{cor}
  \label{cor:strong-jsets}
  Let $(S, \cdot)$ be a semigroup, $m \in \bbN$, $a \in S^{m+1}$, $H \in \calI_m$, and $F \in \Pf(\calT)$. 
  Fix $b \in S$ and for each $f \in F$ define $g_f \in \calT$ by $g_f(t) = f(t)b$. 
  Then there exists $n \in \bbN$, $c \in S^{n+1}$, and $t \in \calJ_n$ such that for all $f \in F$, $x(n, c, t, f) = \prod_{i=1}^m \bigl( a(i) \prod_{t \in H(i)} g_f(t)\big) a(m+1)$.
\end{cor}

\begin{thm}
  Let $(S, \cdot)$ be a semigroup and $A$ a subset of $S$.
  The following are equivalent. 
  \begin{itemize}
    \item[(a)] $A$ is a $J$-set.
    \item[(b)] For all $F \in \calT$, there exist $m \in \bbN$, $a \in S^{m+1}$, and $H \in \calI_m$ such that for all $f \in F$ we have $\prod_{i=1}^n\bigl( a(i) \prod_{t \in H(i)} f(t) \bigr) a(m+1) \in A$.
  \end{itemize}
\end{thm}
\begin{proof}
  \textsl{(a) $\Rightarrow$ (b)}
  This direction should be obvious after a bit of thought. 

  \textsl{(b) $\Rightarrow$ (a)}
  For all $F \in \calT$ by Corollary \ref{cor:strong-jsets} there exist $m \in \bbN$, $a \in S^{m+1}$, and $t \in \calJ_m$ such that for all $f \in F$, $x(m, a, t, f) \in A$.
  Therefore $A$ is a $J$-set.
\end{proof}

With this theorem all of the results previously proved about $J$-sets apply  with our definition.
However in this chapter, we choose to reprove these results primarily to show how the proofs can be simplified with the ``new'' definition of $J$-set.

The first result we (re)prove is \cite[Lemma 2.4]{Hindman:2010fk} which shows that when the underlying semigroup is commutative the definition of a $J$-set is considerably simplified. 

\begin{lem}
  Let $(S, +)$ be a commutative semigroup and let $A \subseteq S$. 
  Then $A$ is a $J$-set if and only if for every $F \in \calT$, there exist $a \in S$ and $H \in \Pf(\bbN)$ such that for all $f \in F$, $a + \sum_{t \in H} f(t) \in A$.
\end{lem}
\begin{proof}
  ($\Rightarrow$)
  Let $F \in \calT$.
  Pick $m \in \bbN$, $a \in S^{m+1}$, and $t \in \calJ_m$ such that $x(m, a, t, f) \in A$.
  Put $b = \sum_{i=1}^{m+1} a(i)$ and $H = \{t_1, t_2, \ldots, t_m\}$.
  Since $S$ is commutative we have that $b + \sum_{t \in H} f(t) = x(m, t, a, f) \in A$.

  ($\Leftarrow$)
  Let $F \in \Pf(\calT)$ and fix $b \in S$.
  For each $f \in F$ define $g_f \in \calT$ by $g_f(t) = f(t)+b$. 
  Pick $a \in S$ and $H \in \Pf(\bbN)$ such that for all $f \in F$, $a + \sum_{t \in H} g_f(t) \in A$. 
  Put $m = |H|$ and enumerate $H$ as a strictly increasing sequence $t_1 < t_2 < \cdots < t_m$. 
  Define $c \in S^{m+1}$ by $c(1) = a$ and $c(i) = b$ for every $i \in \{2, 3, \ldots, m+1\}$.
  Then $x(m, c, t, f) = a + \sum_{t \in H} g_f(t) \in A$.
\end{proof}

We next show that $J$-sets satisfy a superficially stronger condition. 
(In \cite[Definition 3.3(e)]{De:2008uq} this superficially stronger condition was used to define a $J$-set.)

\begin{lem}
  \label{lem:jset-start}
  Let $(S, \cdot)$ be a semigroup and $A$ a $J$-set in $S$.
  Then for every $F \in \Pf(\calT)$ and each $n \in \bbN$ there exist $m \in \bbN$, $a \in S^{m+1}$, and $t \in \calJ_m$, with $t_1 > n$ such that for all $f \in F$, $x(m, a, t, f) \in A$.
\end{lem}
\begin{proof}
  For each $f \in F$ define $g_f \in \calT$ by $g_f(t) = f(n+t)$.
  Since $A$ is a $J$-set, pick $m \in \bbN$, $a \in S^{m+1}$, and $t \in \calJ_m$ such that for all $f \in F$, $x(m, a, t, g_f) \in A$. 
  Define $u \in \calJ_m$ by $u_i =  n + t_i$.
  Then $x(m, a, u, f) = x(m, a, t, g_f) \in A$ for every $f \in F$.
\end{proof}

The next result we reprove is \cite[Theorem 3.4]{De:2008uq} which states that the set of all ultrafilters on a semigroup, each of whose member is a $J$-set, is a closed ideal.
To state this result we introduce the following notation.

\begin{defn}
  Let $(S, \cdot)$ be a semigroup. 
  Define
  \[
    J(S) = \{\, p \in \beta S : \mbox{for every $A \in p$, $A$ is a $J$-set} \,\}.
  \]
\end{defn}

\begin{thm}
  Let $(S, \cdot)$ be a semigroup.
  If $J(S)$ is nonempty, then $J(S)$ is a closed two-sided ideal of $\beta S$.
\end{thm}
\begin{proof}
  Let $p \not\in J(S)$ and pick $A \in p$ such that $A$ is not a $J$-set.
  By definition of $J(S)$ we must have $\overline{A} \cap J(S) = \emptyset$.
  Since $\overline{A}$ is a (basic) open neighborhood of $p$, it follows that $J(S)$ is topologically closed in $\beta S$.

  Now let $p \in J(S)$ and $q \in \beta S$.
  To see that $J(S)$ is an ideal, we show that $pq \in J(S)$ and $qp \in J(S)$. 

  We first show that $pq \in J(S)$.
  Let $F \in \Pf(\calT)$, let $A \in pq$, and put $B = \{\, x \in S : x^{-1}A \in q \,\}$.
  Then $B \in p$ and so $B$ is a $J$-set.
  Pick $m \in \bbN$, $a \in S^{m+1}$, and $t \in \calJ_m$ such that for all $f \in F$ we have $x(m, a, t, f) \in B$.
  By definition of $B$ this means that for all $f \in F$, $x(m, a, t, f)^{-1}A \in q$. 
  Since $q$ is an ultrafilter and $F$ is finite, we have $\bigcap_{f \in F} x(m, a, t, f)^{-1}A \in q$, and moreover, $\bigcap_{f \in F} x(m, a, t, f)^{-1}A \ne \emptyset$.
  Pick $b \in \bigcap_{f \in F} x(m, a, t, f)^{-1}A$ and define $c \in S^{m+1}$ by
  \[
    c =
    \begin{cases}
      a(j) & \mbox{if $j \in \{1, 2, \ldots, m\}$,} \\
      a(m+1)b & \mbox{if $j = m+1$.}
    \end{cases}
  \]
  Therefore, for each $f \in F$, $x(m, c, t, f) \in A$, that is, $A$ is a $J$-set and so $pq \in J(S)$.

  Now we show that $qp \in J(S)$.
  Again let $F \in \Pf(\calT)$, let $A \in qp$, and put $B = \{\, x \in S : x^{-1}A \in p \,\}$.
  Then $B \in q$, and moreover $B \ne \emptyset$.
  Pick $b \in B$, then $b^{-1}A \in p$ implies $b^{-1}A$ is a $J$-set.
  Pick $m \in \bbN$, $a \in S^{m+1}$, and $t \in \calJ_m$ such that for all $f \in F$, we have $x(m, a, t, f) \in b^{-1}A$.
  Define $c \in S^{m+1}$ by
  \[
    c =
    \begin{cases}
      ba(1) & \mbox{if $j =1$,} \\
      a(j) & \mbox{if $j \in \{2, \ldots, m, m+1\}$.}
    \end{cases}
  \]
  Therefore, for each $f \in F$, $x(m, c, t, f) \in A$, that is, $A$ is a $J$-set and so $qp \in J(S)$.
\end{proof}

Even though it is clear that every semigroup $S$ is a $J$-set, this easy fact doesn't necessarily imply that $J(S) \ne \emptyset$.
It's true that $J(S)$ \textsl{is} nonempty but this nontrivial fact follows either from the fact that piecewise syndetic sets are $J$-sets, Lemma \ref{lem:pr-jsets} and \cite[Theorem 3.11]{Hindman:1998fk}, or the Central Sets Theorem. 

We start by proving that piecewise syndetic sets are $J$-sets.
The following result is modeled after \cite[Theorems 14.1 and 14.7]{Hindman:1998fk}. 

\begin{thm}
  Let $(S, \cdot)$ be a semigroup and $A \subseteq S$ piecewise syndetic.
  Then $A$ is also a $J$-set.
\end{thm}
\begin{proof}
  Let $F \in \calT$, put $k = |F|$, and enumerate $F$ as $\{f_1, f_2, \ldots, f_k\}$.
  Put $Y = \bigtimes_{t=1}^k \beta S$, then with the product topology $Y$ is a compact right-topological semigroup by \cite[Theorem 2.22]{Hindman:1998fk}
  For each $i \in \bbN$ define
  \begin{align*}
    I_i &= \Bigl\{\, \bigl( x(m, a, t, f_1), x(m, a, t, f_2), \ldots,
    x(m, a, t, f_k) \bigr) : \mbox{$m \in \bbN$, $a \in S^{m+1}$,} \\
    &\hspace{5em} \mbox{$t \in \calJ_m$, and $t_1 > i$}
    \,\Bigr\},
  \end{align*}
  and put $E_i = I_i \cup \{\, (a, a, \ldots, a) : a \in S \,\}$.
  Put $I = \bigcap_{i=1}^\infty \overline{I_i}$ and $E = \bigcap_{i=1}^\infty \overline{E_i}$.

  Observe that $I$ and $E$ are nonempty closed subsets of $Y$.
  (Since each $I_i \ne \emptyset$ and $I_{i+1} \subseteq I_i$.)

  We claim that $E$ is a subsemigroup of $Y$ and $I$ is an ideal of $E$.
  Let $p$, $q \in E$, $U$ be an open neighborhood of $pq$, and let $i \in \bbN$. 
  Since $\rho_q$ is continuous, pick $V$ a neighborhood of $p$ such that $Vq \subseteq U$. 
  If $p \in I$, then pick $\vec{x} \in I_i \cap V$ otherwise pick $\vec{x} \in E_i \cap V$.
  If $\vec{x} \in I_i$, then pick $m \in \bbN$, $a \in S^{m+1}$, and $H \in \calI_{m,k}$ with $\min H(1) > i$ such that
  \[
    \vec{x} = \bigl( x(m, a, H, f_1), x(m, a, H, f_2), \ldots, x(m,
    a, H, f_l) \bigr)
  \]
  In this case put $j = \max H(m)$, otherwise put $j=i$. 

  Since $\lambda_{\vec{x}}$ is continuous, pick $W$ a neighborhood of $q$ such that $xW \subseteq U$. 
  If $q \in I$, then pick $\vec{y} \in I_j \cap W$, otherwise pick $\vec{y} \in E_j \cap W$.
  Then $\vec{x} \vec{y} \in E_i \cap U$, and if $p \in I$ or $q \in I$, then $\vec{x} \vec{y} \in I_i \cap U$. 
  Hence, it follows that $E$ is a subsemigroup of $Y$ and $I$ is an ideal of $E$.

  Pick $p \in K(\beta S) \cap \overline{A}$ and put $\overline{p} = (p, p, \ldots, p)$. 
  Since $K(Y) = \bigtimes_{t=1}^l K(\beta S)$, we have that $\overline{p} \in K(Y)$. 
  We show that $\overline{p} \in E$.
  Let $U$ be a neighborhood of $\overline{p}$ and pick $B_1$, $B_2$, \dots, $B_l \in p$ such that $\bigtimes_{t=1}^l \overline{B_t} \subseteq U$. 
  Pick $a \in \bigcap_{t=1}^l B_t$, then $(a, a, \ldots, a) \in U \cap E_i$ for all $i \in \bbN$. 
  Hence $\overline{p} \in E$ and moreover $\overline{p} \in K(Y) \cap E$.

  Since $K(Y) \cap E \ne \emptyset$, we know that $K(E) = K(Y) \cap E$.
  Therefore $\overline{p} \in K(E) \subseteq I$.
  Hence $I_i \cap \bigtimes_{i=1}^l A \ne \emptyset$ for all $i \in \bbN$ and so our conclusion follows.
\end{proof}

\begin{cor}
  Let $(S, \cdot)$ be a semigroup, then $c\ell\bigl( K(\beta S) \bigr) \subseteq J(S)$.
\end{cor}
\begin{proof}
  Let $p \in c\ell\bigl( K(\beta S) \bigr)$ and $A \in p$.
  By \cite[Corollary 4.41]{Hindman:1998fk}, $A$ is a piecewise syndetic set and so $A$ is a $J$-set.
  Therefore $p \in J(S)$.
\end{proof}

We now provide another proof, that when combined with \cite[Theorem 3.11]{Hindman:1998fk}, proves that $J(S)$ is nonempty.

\begin{lem}
  \label{lem:pr-jsets}
  Let $(S, \cdot)$ be a semigroup with $A_1 \subseteq S$ and $A_2 \subseteq S$.
  If $A_1 \cup A_2$ is a $J$-set, then either $A_1$ is a $J$-set or $A_2$ is a $J$-set.
\end{lem}
\begin{proof}
  Suppose, to the contrary, that both $A_1$ and $A_2$ are \textsl{not} $J$-sets.
  Pick $F_1$ and $F_2$ in $\Pf(\calT)$ such that for all $m \in \bbN$, every $a \in S^{m+1}$, and every $t \in \calJ_m$, there exist $f \in F_1$ and $g \in F_2$ such that $x(m, a, t, f) \not\in A_1$ and $x(m, a, t, g) \not\in A_2$.
  Let $F = F_1 \cup F_2$, put $k = |F|$, and enumerate $F$ as $\{f_1, f_2, \ldots, f_k\}$.

  By the Hales-Jewett Theorem pick $n \in \bbN$ such that whenever $\{1, 2, \ldots, k\}^n$ is 2-colored there exists a variable word $w(\star)$ which begins and ends with a constant letter, with no two adjacent variable words, and for which the combinatorial line $\bigl\{\, w(\ell) : \ell \{1, 2, \ldots, k\} \,\bigr\}$ is monochromatic. 
  (For instance, if $k = 4$ and $n = 10$, then $w(\star) = (1, \star, 1, 4, \star, 2, \star, 3, 3, 1)$ is a suitable variable word.)

  Now for each $w = (x_1, x_2, \ldots, x_n) \in \{1, 2, \ldots, k\}^n$ define $g_w \in \calT$ by $g_w(t) = \prod_{i=1}^n f_{x_i}(nt + i)$.
  We have, by hypothesis, that $A_1 \cup A_2$ is a $J$-set and since $\{1, 2, \ldots, k\}^n$ is finite, we may pick $m \in \bbN$, $a \in S^{m+1}$, and $t \in \calJ_m$ such that for all $w \in \{1, 2, \ldots, k\}^n$, $x(m, a, t, g_w) \in A$.

  Define the function $\varphi \colon \{1, 2, \ldots, k\}^n \to \{1, 2\}$ as follows:
  \[
    \varphi(w) = 
    \begin{cases}
      1 & \mbox{if $x(m, a, t, g_w) \in A_1$, and} \\
      2 & \mbox{otherwise.}
    \end{cases}
  \]
  Since $\varphi$ is a 2-coloring of $\{1, 2, \ldots, k\}^n$ we may apply the Hales-Jewett Theorem to pick a variable word $w(\star)$ which begins and ends with a constant letter, with no two adjacent variable letters, and for which the combinatorial line $\bigl\{\, w(\ell) : \ell \in \{1, 2, \ldots, k\} \,\bigr\}$ is monochromatic. 
  Without loss of generality we may suppose that $\varphi \bigl( w(\ell) \bigr) = 1$ for every $\ell \in \{1, 2, \ldots, k\}$.

  We claim that there exists $c \in S^{mr+1}$ and $s \in \calJ_{mr}$ such that for all $\ell \in \{1, 2, \ldots, k\}$ we have $x(mr, c, s, f_\ell) = x(m, a, t, g_{w(\ell)}) \in A_1$. 
  Observe that if we prove our claim, then we will have arrived at a contradiction. 
  Therefore for the rest of the proof we focus only on rewriting $x(m, a, t, g_{w(\ell)})$ into the appropriate form.

  Let $w(\star) = (x_1, x_2, \ldots, x_n)$ with each $x_i \in \{1, 2, \ldots, k\} \cup \{\star\}$. 
  Let $r$ be the number of variable letters in $w(\star)$, and for each $i \in \{1, 2, \ldots, r-1\}$, let $b_i$ be the position of the \mbox{$i$th} variable letter in $w(\star)$ and let $b_0$ be the position of the \mbox{$r$th} variable letter.
  (For instance, if $k = 4$ and $n = 10$, $w(\star) = (1, \star, 1, 4, \star, 2, \star, 3, 3, 1)$, then $r = 3$, $b_1 = 2$, $b_2 = 5$, and $b_0 = 7$.
  The reason we let $b_0$ represent the position of the \mbox{$r$th} variable letter is because we will be performing modulo arithmetic on the index of the $b_i$'s.)

  For each $i \in \{1, 2, \ldots, mr\}$ define $s_i = nt_{\lceil i/r \rceil} + b_{i \bmod r}$.
  Observe that $r \le n/2$, and since $t_1 < t_2 < \cdots < t_m$, it follows that $s = (s_1, s_2, \ldots, s_{mr}) \in \calJ_{mr}$.

  To define $c \in S^{mr+1}$ we will need to define some further helpful notation. 
  Let $L = \bigl( L(1), L(2), \ldots, L(r+1) \bigr)$ be a partition of $\{1, 2, \ldots, n\} \setminus \{b_1, b_2, \ldots, b_r\}$ such that each $L(i)$ is nonempty and $\max L(i) < \min L(i+1)$ for every $i \in \{1, 2, \ldots, r\}$. 
  For arithmetical convenience put $L(0) = L(r)$. 
  (For instance, if $k = 4$, $n = 10$, $w(\star) = (1, \star, 1, 4, \star, 2, \star, 3, 3, 1)$, then $L(1) = \{1\}$, $L(2) = \{2\}$, $L(3) = \{6\}$, $L(4) = \{8, 9, 10\}$, and $L(0) = \{6\}$.)

  Now we define $c \in S^{mr+1}$ as follows:
  \[
    c(i) = 
    \begin{cases}
      a(1)\prod_{j \in L(1)} f_j(nt_1 + j) & \mbox{if $i = 1$,} \\
      \prod_{j \in L(i \bmod r)}  f_j(nt_{\lceil i/(r+1) \rceil} + j) & \mbox{if $i \not\equiv 1 \pmod r$, }\\
      \prod_{j \in L(r+1)} \bigl( f_j(nt_{\lceil i/(r+1) \rceil} + j) \bigr) a\bigl( \lceil (i+1)/(r+1) \rceil \bigr) & \\
      \hspace{2em} \cdot\prod_{j \in L(1)} f_j(nt_{\lceil (i+1)/(r+1) \rceil} + j) & \mbox{if $i \bmod r \equiv 1$ and $i \ne mr +1$, }\\
      \prod_{j \in L(r+1)} \bigr( f_i(nt_m + j) \bigr) a(m+1) & \mbox{if $i = mr + 1$.}
    \end{cases}
  \]

  Then we have that $x(mr, c, s, f_\ell) = x(m, a, t, g_{w(\ell)})$ for all $\ell \in \{1, 2, \ldots, k\}$.
\end{proof}

With Lemma \ref{lem:pr-jsets} we prove a stronger relationship between $J$-sets and $J(S)$.

\begin{thm}
  Let $(S, \cdot)$ be a semigroup and $A \subseteq S$.
  Then $J(S) \cap \overline{A} \ne \emptyset$ if and only if $A$ is a $J$-set.
\end{thm}
\begin{proof}
  ($\Rightarrow$)
  Let $p \in J(S) \cap \overline{A}$. 
  Since $p \in J(S)$, every member of $p$ is a $J$-set.
  Hence $A$ is a $J$-set.

  ($\Leftarrow$)
  Suppose $A$ is a $J$-set. 
  By Lemma \ref{lem:pr-jsets} and \cite[Theorem 3.11]{Hindman:1998fk}, there exists an ultrafilter $p \in \beta S$ such that $A \in p$ and every member of $p$ is a $J$-set. 
  Therefore $p \in J(S)$.
\end{proof}


\section{Central Sets Theorem}
The final proof that $J(S)$ is nonempty follows from the Central Sets Theorem.
\begin{defn}
  Let $(S, \cdot)$ be a semigroup and $A \subseteq S$.
  We call $A$ a \textsl{$C$-set} if and only if there exist $m \colon \Pf(\calT) \to \bbN$, $\alpha \colon \bigtimes_{F \in \Pf(\calT)} S^{m(F)+1}$, and $\tau \in \bigtimes_{F \in \Pf(\calT)} \calJ_{m(F)}$ such that 
  \begin{itemize}
    \item[(1)] if $F$, $G \in \Pf(\calT)$ with $F \subsetneq G$, then $\tau(F)\bigl( m(F) \bigr) < \tau(G)(1)$, and
    \item[(2)] whenever $n \in \bbN$, $G_1$,$G_2$, \dots, $G_n \in \Pf(\calT)$  with $G_1 \subsetneq G_2 \subsetneq \cdots \subsetneq G_n$, and for each $i \in \{1, 2, \ldots, n\}$, $f_i \in G_i$, then we have $\prod_{i=1}^n x(m(G_i), \alpha(G_i), \tau(G_i), f_i) \in A$.
  \end{itemize}
\end{defn}

We now prove that $C$-sets and idempotents in $J(S)$ are closely related.
\begin{thm}
  Let $(S, \cdot)$ be a semigroup and let $A \subseteq S$. 
  Then $A$ is a $C$-set if and only if there exists an idempotent in $p \in \overline{A} \cap J(S)$.
\end{thm}
\begin{proof}
  ($\Rightarrow$)
  Pick $m \colon \Pf(\calT) \to \bbN$, $\alpha \colon \bigtimes_{F \in \Pf(\calT)} S^{m(F)+1}$, and $\tau \in \bigtimes_{F \in \Pf(\calT)} \calJ_{m(F)}$ as guaranteed by the definition of a $C$-set. 
  For each $F \in \Pf(\calT)$ define 
  \begin{align*}
    T(F) &= \bigl\{\, \textstyle \prod_{i=1}^n x(m(F_i), \alpha(F_i), \tau(F_i), f_i) : \mbox{$n \in \bbN$ with $n \ge |F|$, each $F_i \in \calT$,}\\
 &\hspace{12em}\mbox{$F \subsetneq F_1 \subsetneq F_2 \subsetneq \cdots \subsetneq F_n$, $\la f_i \ra_{i=1}^n \in \bigtimes_{i=1}^n F_i$,} \\
 &\hspace{12em} \mbox{and $F \subseteq \{f_1, f_2, \ldots, f_n\}$} \,\bigr\}.
  \end{align*}

  Observe that the collection $\{\, T(F) : F \in \Pf(\calT) \,\}$ has f.i.p. since $T(F \cup G) \subseteq T(F) \cap T(G)$ for all $F$, $G \in \Pf(\calT)$.
  (In fact the collection $\{\, T(F) : F \in \Pf(\calT) \,\}$ is a filterbase on $S$.)
  Therefore $\mathbf{Q} = \bigcap_{F \in \Pf(\calT)} \overline{T(F)}$ is a closed nonempty subset of $\beta S$. 
  We show that $\mathbf{Q}$ is in fact a subsemigroup of $\beta S$.
  We can either verify this directly or apply \cite[Theorem 4.20]{Hindman:1998fk}.
  Let $F \in \Pf(\calT)$ and $y \in T(F)$.
  By \cite[Theorem 4.20]{Hindman:1998fk} it suffices to show that there exists $G \in \Pf(\calT)$ such that $yT(G) \subseteq T(F)$. 
  Pick $n \in \bbN$ with $n \ge |F|$ and such that for every $i \in \{1, 2, \ldots, n\}$, $F_i \in \calT$ with $F \subsetneq F_1 \subsetneq F_2 \subsetneq \cdots \subsetneq F_n$, and pick $\la f_i \ra_{i=1}^n \in \bigtimes_{i=1}^n F_i$ with $F \subseteq \{f_1, f_2, \ldots, f_n\}$ and such that $y = \prod_{i=1}^n x(m(F_i), \alpha(F_i), \tau(F_i), f_i)$. 
  We show that $yT(F_n) \subseteq T(F)$. 
  Let $m \in \bbN$ with $m \ge |F_n|$, for each $i \in \{1, 2, \ldots, m\}$, $G_i \in \calT$ with $F_n \subsetneq G_1 \subsetneq G_2 \subsetneq \cdots \subsetneq G_m$, and $\la g_i \ra_{i=1}^m \in \bigtimes_{i=1}^m G_i$ with $F_n \subseteq \{g_1, g_2, \ldots, g_n\}$. 
  Then $y \prod_{i=1}^m x(m(G_i), \alpha(G_i), \tau(G_i), g_i) \in T(F)$ since $F \subsetneq F_1 \subsetneq F_2 \subsetneq \cdots \subsetneq F_n \subsetneq G_1 \subsetneq G_2 \subsetneq \cdots \subsetneq G_m$ and $(f_1, f_2, \ldots, f_n, g_1, g_2, \ldots, g_m) \in \bigtimes_{i=1}^{n+m} H_i$ where $H_i = F_i$ if $i \in \{1, 2, \ldots, n\}$ and $H_i = G_{i-n}$ if $i \in \{n+1, n+2, \ldots, n+m\}$, $n+m \ge |F|$, and $F \subseteq \{f_1, f_2, \ldots, f_n, g_1, g_2, \ldots, g_m\}$. 
  Hence by \cite[Theorem 4.20]{Hindman:1998fk} $\mathbf{Q}$ is a subsemigroup of $\beta S$. 

  We claim that $K(\mathbf{Q}) \subseteq \overline{A} \cap J(S)$. 
  If this claim is true, then we are done since any idempotent in $K(\mathbf{Q})$ will establish the theorem. 
  By definition, for each $F \in \Pf(\calT)$, we have $T(F) \subseteq A$ and moreover $\overline{T(F)} \subseteq \overline{A}$.
  In particular, $\mathbf{Q} \subseteq \overline{A}$. 
  Let $p \in K(\mathbf{Q})$.
  To show that $p \in J(S)$ it suffices to show that $B$ is a $J$-set for all $B \in p$. 

  Suppose to the contrary that there exists $B \in p$ such that $B$ is \textsl{not} a $J$-set. 
  Pick $F \in \Pf(\calT)$ such that for all $m \in \bbN$, $a \in S^{m+1}$, and $t \in \calJ_m$, there exists $f \in F$ such that $x(m, a, t, f) \not\in B$. 
  Since $p \in \mathbf{Q}$ we have that $B \cap T(\{f\}) \in p$. 
  
  Let $y \in B \cap T(\{f\})$, then there exists $n \in \bbN$ with $n \ge 1$, each $F_i \in \calT$ and $\{f\} \subsetneq F_1 \subsetneq F_2 \subsetneq \cdots \subsetneq F_n$, $\la f_i \ra_{i=1}^n \in \bigtimes_{i=1}^n F_i$, and $f \in \{f_1, f_2, \ldots, f_n\}$ with $y = \prod_{i=1}^n x(m(F_i), \alpha(F_i), \tau(F_i), f_i)$.
  Suppose that $f = f_{i_0}$, then we show that there exist $p \in \bbN$, $a \in S^{p+1}$, and $t \in \calJ_p$ such that $x(p, a, t, f) \in B$, obviously a contradiction. 
  Put $p = m(F_{i_0})$ and $t = \tau(F_{i_0})$. 
  Define $a \in S^{p+1}$ as
  \[
    a(j) =
    \begin{cases}
      \bigl( \prod_{i=1}^{i_0-1} x(m(F_i), \alpha(F_i), \tau(F_i), f_i) \bigr) \cdot \alpha(F_{i_0})(1) & \mbox{if $j = 1$,} \\
      \alpha(F_{i_0})(j) & \mbox{if $j \in \{2, 3, \ldots, p\}$,} \\
      \alpha(F_{i_0})(p+1) \cdot \bigl( \prod_{i=i_0+1}^n x(m(F_i), \alpha(F_i), \tau(F_i), f_n) \bigr) & \mbox{if $j = p+1$.}
    \end{cases}
  \]
  Then $x(p, a, t, f) = y \in B$, a contradiction.
  Hence $B$ is a $J$-set and so $p \in J(S)$.

  ($\Leftarrow$)
  Let $p = p \cdot p \in \overline{A} \cap J(S)$.
  Since $A \in p$ and $p$ is an idempotent we have, by \cite[Lemma 4.14]{Hindman:1998fk}, that $x^{-1}A^\star \in p$ for all $x \in A^\star$ where $A^\star = \{\, x \in A : x^{-1}A \in p\}$. 
  We will recursively define our functions $m$, $\alpha$, and $\tau$ by the size of $F \in \Pf(\calT)$ such that we satisfy, for $F \in \Pf(\calT)$, the following hypothesis:
  \begin{itemize}
    \item[(1)] If $\emptyset \ne G \subsetneq F$, then $\tau(G)\bigl( m(G) \bigr) < \tau(F)(1)$.
    
    \item[(2)] If $n \in \bbN$, $\emptyset \ne G_1 \subsetneq G_2 \subsetneq \cdots \subsetneq G_n = F$, and $\la f_i \ra_{i=1}^n \in \bigtimes_{i=1}^n G_i$, then \[\textstyle \prod_{i=1}^n x(m(G_i), \alpha(G_i), \tau(G_i), f_i)) \in A^\star.\]
  \end{itemize}

  Let $F \in \Pf(\calT)$.
  First, assume that $|F| = 1$, that is $F = \{f\}$ for some sequence $f \in \calT$.
  Since $A^\star$ is a $J$-set, pick $m(F) \in \bbN$, $\alpha(F) \in S^{m(F)+1}$, and $\tau(F) \in \calJ_{m(F)}$ such that $x(m(F), \alpha(F), \tau(F), f) \in A^\star$. 

  Now assume that $|F| > 1$ and for all $\emptyset \ne G \subsetneq F$ we have defined $m(G)$, $\alpha(G)$, and $\tau(G)$ so that hypotheses (1) and (2) hold.
  Put 
  \begin{align*}
    M &= \bigl\{\, \textstyle \prod_{i=1}^n x(m(G_i), \alpha(G_i), \tau(G_i), f_i) : \mbox{$n \in \bbN$, $\emptyset \ne G_1 \subsetneq G_2 \subsetneq \cdots \subsetneq G_n \subsetneq F$} \\
    &\hspace{12em} \mbox{and $\la f_i \ra_{i=1}^n \in \bigtimes_{i=1}^n G_i$} \,\bigr\}.
  \end{align*}
  Observe that since $F$ is finite, $M$ is also finite.
  By hypothesis (2) we have that $M \subseteq A^\star$.
  Put $B = A^\star \cap \bigcap_{x \in M} x^{-1}A^\star$, then $B \in p$ and so $B$ is a $J$-set. 

  For each $\emptyset \ne G \subsetneq F$, put $l(G) = \tau(G)\bigl( m(G) \bigr)$ and put $k = \max\{\, l(G) : \emptyset \ne G \subsetneq F \,\}$.
  By Lemma \ref{lem:jset-start}, pick $m(F) \in \bbN$, $\alpha(F) \in S^{m(F)+1}$, and $\tau(F) \in \calJ_{m(F)}$ such that $\tau(F)(1) > k$ and for every $f \in F$, $x(m(F), \alpha(F), \tau(F), f) \in B$.
  Hypothesis (1) is satisfied, since $\tau(F)(1) > k \le \max l(G)$ for all $\emptyset \ne G \subsetneq F$.
  We show that hypothesis (2) is also satisfied.
  Let $n \in \bbN$, $\emptyset \ne G_1 \subsetneq G_2 \subsetneq \cdots \subsetneq G_{n-1} \subsetneq G_n = F$, and $\la f_i \ra_{i=1}^n \bigtimes_{i=1}^n G_i$. 
  If $n = 1$, then $x(m(G_1), \alpha(G_1), \tau(G_1), f) \in B \subseteq A^\star$.
  Now assume that $n > 1$ and put $y = \prod_{i=1}^{n-1} x(m(G_i), \alpha(G_i), \tau(G_i), f_i)$. 
  By definition $y \in M$ and since $x(m(G_n), \alpha(G_n), \tau(G_n), f_n) = x(m(F), \alpha(F), \tau(F), f_n) \in B \subseteq y^{-1}A^\star$ we have
  \[
    \textstyle
    \prod_{i=1}^n x(m(G_i), \alpha(G_i), \tau(G_i), f_i) = y \cdot x(m(F), \alpha(F), \tau(F), f_n) \in A^\star.
  \]
  Hence hypotheses (1) and (2) are satisfied and this completes the proof for this direction.
\end{proof}

% Endnotes 
%\theendnotes

% Things referenced in the preliminaries chapter. Eventually this will
% placed in a separate file so the References appear at the end.
\bibliographystyle{amsplain}
\bibliography{../references}

\end{document}