% Author: John H. Johnson
% email: john.j.jr@gmail.com
%
% Brief description of file
% -------------------------
%
% This is a chapter in my dissertation tentatively entitled "A New and
% Simpler Central Sets Theorem".  The new and simpler part is due to a
% different definition of J-sets, which in turns leads to a different
% definition of C-sets.  Happily the new definition is equivalent to
% the old definition.  Therefore no proofs need to be rewritten; but
% there is value in rewriting the proofs, since as this chapter shows,
% the rewritten proofs are often simpler than the old proofs.
%
% N.B. The new definition of J-sets essentially first appears in an
% article, "Ramsey Theory in Noncommutative Semigroups", by Bergelson
% and Hindman in their Theorem 2.6.

\documentclass[12pt]{article}

\usepackage{amsthm, amssymb, amsmath}
\usepackage{color}
\usepackage{endnotes}
\usepackage{url}


\usepackage[margin=1in]{geometry}

\usepackage[doublespacing]{setspace}
\usepackage{url}

\newtheoremstyle{plain}{3mm}{3mm}{\slshape}{}{\bfseries}{.}{.5em}{}
\theoremstyle{plain}

% Numbered theorems 
\newtheorem{thm}{Theorem}[section]
\newtheorem{lem}[thm]{Lemma}
\newtheorem{prop}[thm]{Proposition}
\newtheorem{cor}[thm]{Corollary}
\newtheorem{up}[thm]{Ultrafilter Principle}
\newtheorem{radoSelect}[thm]{Rado's Selection Lemma}
\newtheorem{php}[thm]{Pigeonhole Principle}
\newtheorem{vdw}[thm]{Van der Waerden's Theorem}
\newtheorem{hj}[thm]{Hales-Jewett Theorem}
\newtheorem{shj}[thm]{Special Hales-Jewett Theorem}


\newtheorem{FST}[thm]{Hindman's Theorem}
\newtheorem{MBR}[thm]{Multiple Birkhoff Recurrence Theorem}
\newtheorem{recur}[thm]{Recurrence Theorem}
\newtheorem{OCST}[thm]{Furstenburg's Original Central Sets Theorem}
\newtheorem{cst}[thm]{Central Sets Theorem}



\newtheorem{claim}[thm]{Claim}
\newtheorem{ques}[thm]{Question}
\newtheorem{conj}[thm]{Conjecture}


\theoremstyle{definition}

% Numbered "definition" style theorem environments
\newtheorem{defn}[thm]{Definition}
\newtheorem{rmk}[thm]{Remark}
\newtheorem{example}[thm]{Example}

\newcommand{\la}{\langle}
\newcommand{\ra}{\rangle}
\newcommand{\bbN}{\mathbb{N}}
\newcommand{\bbZ}{\mathbb{Z}}
\newcommand{\bbR}{\mathbb{R}}
\newcommand{\AP}{\mathcal{AP}}
\newcommand{\AL}{\mathcal{AL}}

% Short names for calligraphic math letters.
\newcommand{\calA}{\mathcal{A}}
\newcommand{\calB}{\mathcal{B}}
\newcommand{\calC}{\mathcal{C}}
\newcommand{\calE}{\mathcal{E}}
\newcommand{\calF}{\mathcal{F}}
\newcommand{\calG}{\mathcal{G}}
\newcommand{\calH}{\mathcal{H}}
\newcommand{\calI}{\mathcal{I}}
\newcommand{\calJ}{\mathcal{J}}
\newcommand{\calP}{\mathcal{P}}
\newcommand{\calR}{\mathcal{R}}
\newcommand{\calS}{\mathcal{S}}
\newcommand{\calT}{\mathcal{T}}
\newcommand{\calU}{\mathcal{U}}

\newcommand{\Pf}{\mathcal{P}_f}


\newcommand{\setfunc}[2]{\hbox{${}^{\hbox{$#1$}}\hskip -1 pt #2$}}

\font\bigmath=cmsy10 scaled \magstep 3
\newcommand{\bigtimes}{\hbox{\bigmath \char'2}}

\newcommand{\cchi}{\raise 2 pt \hbox{$\chi$}}

\begin{document}
\section{$J$-sets}
\begin{defn}
  Let $(S, \cdot)$ be a semigroup.
  \begin{itemize}
    \item[(b)] For each $m \in \bbN$, define
      \[
        \calJ_m = \{\, (t_1, t_2, \ldots, t_m) \in \bbN^m : t_1 < t_2 < \cdots < t_m \,\}.
      \]

    \item[(b)] Put $\calT(S) = \setfunc{\bbN}{S}$.
      If the semigroup is clear from context, we write $\calT$ instead of $\calT(S)$.

    \item[(c)] For each $m \in \bbN$, $a \in S^{m+1}$, $t \in \calJ_m$, and $f \in \calT$, put
      \[
        \textstyle
        x(m, a, t, f) = \Bigl( \prod_{i=1}^m \bigl( a(i)f(t_i) \bigr) \Bigr)a(m+1).
      \]

    \item[(d)] We call a subset $A \subseteq S$ a \textsl{$J$-set (in $S$)} if and only if for every $F \in \Pf(\calT)$ there exist $m \in \bbN$, $a \in S^{m+1}$, and $t \in \calJ_m$ such that for each $f \in F$ we have $x(m, a, t, f) \in A$.

    \item[(d)] Put
      \[
        J(S) = \{\, p \in \beta S : \mbox{$A$ is a $J$-set for every $A \in p$} \,\}.
      \]
  \end{itemize}
\end{defn}
\begin{rmk}
  Despite appearances to the contrary, I must point out that $J$-sets are \textsl{not} named after the author!
\end{rmk}

\begin{thm}
  Let $(S, \cdot)$ be a semigroup.
  If $J(S)$ is nonempty, then $J(S)$ is a compact two-sided ideal of $\beta S$.
\end{thm}
\begin{proof}
  To show that $J(S)$ is compact it suffices to show that $J(S)$ is topologically closed in $\beta S$.
  Let $p \not\in J(S)$ and pick $A \in p$ such that $A$ is not a $J$-set.
  By definition of $J(S)$ we must have $\overline{A} \cap J(S) = \emptyset$.
  Since $\overline{A}$ is a (basic) open neighborhood of $p$, it follows that $J(S)$ is topologically closed in $\beta S$.

  Now let $p \in J(S)$ and $q \in \beta S$.
  To see that $J(S)$ is an ideal, we show that $pq \in J(S)$ and $qp \in J(S)$. 

  We first show that $pq \in J(S)$.
  Let $F \in \Pf(\calT)$, let $A \in pq$, and put $B = \{\, x \in S : x^{-1}A \in q \,\}$.
  Then $B \in p$ and so $B$ is a $J$-set.
  Pick $m \in \bbN$, $a \in S^{m+1}$, and $t \in \calJ_m$ such that for all $f \in F$ we have $x(m, a, t, f) \in B$.
  By definition of $B$ this means that for all $f \in F$, $x(m, a, t, f)^{-1}A \in q$. 
  Since $q$ is an ultrafilter and $F$ is finite, we have $\bigcap_{f \in F} x(m, a, t, f)^{-1}A \in q$, and moreover, $\bigcap_{f \in F} x(m, a, t, f)^{-1}A \ne \emptyset$.
  Pick $b \in \bigcap_{f \in F} x(m, a, t, f)^{-1}A$ and define $c \in S^{m+1}$ by
  \[
    c =
    \begin{cases}
      a(j) & \mbox{if $j \in \{1, 2, \ldots, m\}$,} \\
      a(m+1)b & \mbox{if $j = m+1$.}
    \end{cases}
  \]
  Therefore, for each $f \in F$, $x(m, c, t, f) \in A$, that is, $A$ is a $J$-set and so $pq \in J(S)$.

  Now we show that $qp \in J(S)$.
  Again let $F \in \Pf(\calT)$, let $A \in qp$, and put $B = \{\, x \in S : x^{-1}A \in p \,\}$.
  Then $B \in q$, and moreover $B \ne \emptyset$.
  Pick $b \in B$, then $b^{-1}A \in p$ implies $b^{-1}A$ is a $J$-set.
  Pick $m \in \bbN$, $a \in S^{m+1}$, and $t \in \calJ_m$ such that for all $f \in F$, we have $x(m, a, t, f) \in b^{-1}A$.
  Define $c \in S^{m+1}$ by
  \[
    c =
    \begin{cases}
      ba(1) & \mbox{if $j =1$,} \\
      a(j) & \mbox{if $j \in \{2, \ldots, m, m+1\}$.}
    \end{cases}
  \]
  Therefore, for each $f \in F$, $x(m, c, t, f) \in A$, that is, $A$ is a $J$-set and so $qp \in J(S)$.
\end{proof}

Even though it is clear that every semigroup $S$ is a $J$-set, this easy fact doesn't imply that $J(S) \ne \emptyset$. 
By our work in the Preliminaries Chapter, to show that $J(S)$ is nonempty, it suffices to show that $J$-sets are partition regular.

\begin{lem}
  Let $(S, \cdot)$ be a semigroup, $m$,$r \in \bbN$, $a \in S^{m+1}$, $t \in \calJ_m$, and for each $y \in \bbN$ 

\end{lem}

\begin{lem}
  Let $(S, \cdot)$ be a semigroup with $A_1 \subseteq S$ and $A_2 \subseteq S$.
  If $A_1 \cup A_2$ is a $J$-set, then either $A_1$ is a $J$-set or $A_2$ is a $J$-set.
\end{lem}
\begin{proof}
  Suppose, to the contrary, that both $A_1$ and $A_2$ are \textsl{not} $J$-sets.
  Pick $F_1$ and $F_2$ in $\Pf(\calT)$ such that for all $m \in \bbN$, every $a \in S^{m+1}$, and every $t \in \calJ_m$, there exist $f \in F_1$ and $g \in F_2$ such that $x(m, a, t, f) \not\in A_1$ and $x(m, a, t, g) \not\in A_2$.
  Let $F = F_1 \cup F_2$, put $k = |F|$, and enumerate $F$ as $\{f_1, f_2, \ldots, f_k\}$.

  By the Hales-Jewett Theorem pick $n \in \bbN$ such that whenever $\{1, 2, \ldots, k\}^n$ is 2-colored there exists a variable word $w(\star)$ which begins and ends with a constant letter, with no two adjacent variable words, and for which the combinatorial line $\bigl\{\, w(\ell) : \ell \{1, 2, \ldots, k\} \,\bigr\}$ is monochromatic. 
  (For instance, if $k = 4$ and $n = 10$, then $w(\star) = (1, \star, 1, 4, \star, 2, \star, 3, 3, 1)$ is a suitable variable word.)

  Now for each $w = (x_1, x_2, \ldots, x_n) \in \{1, 2, \ldots, k\}^n$ define $g_w \in \calT$ by $g_w(t) = \prod_{i=1}^n f_{x_i}(nt + i)$.
  We have, by hypothesis, that $A_1 \cup A_2$ is a $J$-set and since $\{1, 2, \ldots, k\}^n$ is finite, we may pick $m \in \bbN$, $a \in S^{m+1}$, and $t \in \calJ_m$ such that for all $w \in \{1, 2, \ldots, k\}^n$, $x(m, a, t, g_w) \in A$.

  Define the function $\varphi \colon \{1, 2, \ldots, k\}^n \to \{1, 2\}$ as follows:
  \[
    \varphi(w) = 
    \begin{cases}
      1 & \mbox{if $x(m, a, t, g_w) \in A_1$, and} \\
      2 & \mbox{otherwise.}
    \end{cases}
  \]
  Since $\varphi$ is a 2-coloring of $\{1, 2, \ldots, k\}^n$ we may apply the Hales-Jewett Theorem to pick a variable word $w(\star)$ which begins and ends with a constant letter, with no two adjacent variable letters, and for which the combinatorial line $\bigl\{\, w(\ell) : \ell \in \{1, 2, \ldots, k\} \,\bigr\}$ is monochromatic. 
  Without loss of generality we may suppose that $\varphi \bigl( w(\ell) \bigr) = 1$ for every $\ell \in \{1, 2, \ldots, k\}$.

  We claim that there exists $c \in S^{mr+1}$ and $u \in \calJ_{mr}$ such that for all $\ell \in \{1, 2, \ldots, k\}$ we have $x(mr, c, u, f_\ell) = x(m, a, t, g_{w(\ell)}) \in A_1$. 
  Observe that if we prove our claim, then we will have arrived at a contradiction. 
  Therefore for the rest of the proof we focus only on rewriting $x(m, a, t, g_{w(\ell)})$ into the appropriate form.

  Let $w(\star) = (x_1, x_2, \ldots, x_n)$ with each $x_i \in \{1, 2, \ldots, k\} \cup \{\star\}$. 
  Let $r$ be the number of variable letters in $w(\star)$, and for each $i \in \{1, 2, \ldots, r-1\}$, let $b_i$ be the position of the \mbox{$i$th} variable letter in $w(\star)$ and let $b_0$ be the position of the \mbox{$r$th} variable letter.
  (For instance, if $k = 4$ and $n = 10$, $w(\star) = (1, \star, 1, 4, \star, 2, \star, 3, 3, 1)$, then $r = 3$, $b_1 = 2$, $b_2 = 5$, and $b_0 = 7$.
  The reason we let $b_0$ represent the position of the \mbox{$r$th} variable letter is because we will be performing modulo arithmetic on the index of the $b_i$'s.)

  For each $i \in \{1, 2, \ldots, mr\}$ define $s_i = nt_{\lceil i/r \rceil} + b_{i \bmod r}$.
  Observe that $r \le n/2$, and since $t_1 < t_2 < \cdots < t_m$, it follows that $s = (s_1, s_2, \ldots, s_{mr}) \in \calJ_{mr}$.

  To define $c \in S^{mr+1}$ we will need to define some further helpful notation. 
  Let $L = \bigl( L(1), L(2), \ldots, L(r+1) \bigr)$ be a partition of $\{1, 2, \ldots, n\} \setminus \{b_1, b_2, \ldots, b_r\}$ such that each $L(i)$ is nonempty and $\max L(i) < \min L(i+1)$ for every $i \in \{1, 2, \ldots, r\}$. 
  For arithmetical convenience put $L(0) = L(r)$. 
  (For instance, if $k = 4$, $n = 10$, $w(\star) = (1, \star, 1, 4, \star, 2, \star, 3, 3, 1)$, then $L(1) = \{1\}$, $L(2) = \{2\}$, $L(3) = \{6\}$, $L(4) = \{8, 9, 10\}$, and $L(0) = \{6\}$.)

  Now we define $c \in S^{mr+1}$ as follows:
  \[
    c(i) = 
    \begin{cases}
      a(1)\prod_{j \in L(1)} f_j(nt_1 + j) & \mbox{if $i = 1$,} \\
      \prod_{j \in L(i \bmod r)}  f_j(nt_{\lceil i/(r+1) \rceil} + j) & \mbox{if $i \not\equiv 1 \pmod r$, }\\
      \prod_{j \in L(r+1)} \bigl( f_j(nt_{\lceil i/(r+1) \rceil} + j) \bigr) a\bigl( \lceil (i+1)/(r+1) \rceil \bigr) & \\
      \hspace{2em} \cdot\prod_{j \in L(1)} f_j(nt_{\lceil (i+1)/(r+1) \rceil} + j) & \mbox{if $i \bmod r \equiv 1$ and $i \ne mr +1$, }\\
      \prod_{j \in L(r+1)} \bigr( f_i(nt_m + j) \bigr) a(m+1) & \mbox{if $i = mr + 1$.}
    \end{cases}
  \]

  Then we have that $x(mr, c, s, f_\ell) = x(m, a, t, g_{w(\ell)})$ for all $\ell \in \{1, 2, \ldots, k\}$.
\end{proof}


\section{Central Sets Theorem}

% Endnotes 
%\theendnotes

% Things referenced in the preliminaries chapter. Eventually this will
% placed in a separate file so the References appear at the end.
\bibliographystyle{amsplain}
\bibliography{../references}

\end{document}